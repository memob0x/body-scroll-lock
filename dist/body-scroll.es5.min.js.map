{"version":3,"sources":["body-scroll.mjs"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","global","factory","exports","module","define","amd","self","bodyScroll","NAMESPACE","$head","document","head","$html","documentElement","$body","body","$style","querySelector","concat","createElement","id","_x","_y","_styleExists","parentNode","_getClientWidth","locked","style","width","getBoundingClientRect","overflow","_dispatch","eventName","window","CustomEvent","dispatchEvent","_lock","pageXOffset","pageYOffset","disabled","appendChild","sheet","cssRules","deleteRule","insertRule","scrollY","classList","add","_unlock","remove","scrollTo","_resize","mode","update","isLocked","contains","Object","freeze","__proto__","lock","unlock"],"mappings":"AAAA,aAEA,SAASA,QAAQC,GAAmV,OAAtOD,QAArD,mBAAXE,QAAoD,iBAApBA,OAAOC,SAAmC,SAAiBF,GAAO,cAAcA,GAA2B,SAAiBA,GAAO,OAAOA,GAAyB,mBAAXC,QAAyBD,EAAIG,cAAgBF,QAAUD,IAAQC,OAAOG,UAAY,gBAAkBJ,IAAyBA,IAEnX,SAAWK,EAAQC,GACqD,YAAlD,oBAAZC,QAA0B,YAAcR,QAAQQ,WAA4C,oBAAXC,OAAyBA,OAAOD,QAAUD,IAA8B,mBAAXG,QAAyBA,OAAOC,IAAMD,OAAO,aAAcH,IAAYD,EAASA,GAAUM,MAAaC,WAAaN,IAD5Q,MAEG,EAAQ,WAGT,IAAIO,EAAY,mBACZC,EAAQC,SAASC,KACjBC,EAAQF,SAASG,gBACjBC,EAAQJ,SAASK,KAEjBC,EAASP,EAAMQ,cAAc,IAAIC,OAAOV,KAAe,WACzD,IAAIQ,EAASN,SAASS,cAAc,SAEpC,OADAH,EAAOI,GAAKZ,EACLQ,EAHkD,GAMvDK,EAAK,EACLC,EAAK,EAWLC,EAAe,WACjB,OAAOP,EAAOQ,aAAef,GAG3BgB,EAAkB,SAAyBC,GAG7C,OAFAZ,EAAMa,MAAMC,MAAQF,EAAS,GAAGR,OAAON,EAAMiB,wBAAwBD,MAAO,MAAQ,GACpFhB,EAAMe,MAAMG,SAAWJ,EAAS,SAAW,GACpCd,EAAMiB,wBAAwBD,OAGnCG,EAAY,SAAmBC,GACjC,MAAqC,mBAAvBC,OAAOC,YAA6BD,OAAOE,cAAc,IAAID,YAAYF,IAAc,cAGnGI,EAAQ,WAtBVf,EAAKY,OAAOI,YACZf,EAAKW,OAAOK,YAuBZtB,EAAOuB,UAAW,EAGbhB,KACHd,EAAM+B,YAAYxB,GAGhBA,EAAOyB,MAAMC,SANL,IAOV1B,EAAOyB,MAAME,WAPH,GAUZ3B,EAAOyB,MAAMG,WAAW,0BAA0B1B,OAAOV,EAAW,eAAeU,QAAyB,EAAlBe,OAAOY,QAAc,iCAAiC3B,OAAOV,EAAW,oBAAoBU,OAAOO,GAAgB,GAAQA,GAAgB,GAAQ,4BAVjO,GAWZb,EAAMkC,UAAUC,IAAIvC,IAGlBwC,EAAU,WACZpC,EAAMkC,UAAUG,OAAOzC,GAnChByB,OAAOiB,SAAS7B,EAAIC,GAqC3BN,EAAOuB,UAAW,GAGhBY,EAAU,SAAiBC,GAC7B,OAAOnB,OAAO,GAAGf,OAAOkC,EAAM,kBAAkB,SAAUC,IAGxDC,EAAW,WACb,OAAO/B,MAAmBP,EAAOuB,UAAY3B,EAAMkC,UAAUS,SAAS/C,IAGpE6C,EAAS,WACNC,MAILN,IAEAZ,MA0BF,OAPUoB,OAAOC,OAAO,CACtBC,UAAW,KACXJ,SAAUA,EACVD,OAAQA,EACRM,KApBS,WACTvB,IAEAL,EAAU,kBAEVoB,EAAQ,QAgBRS,OAbW,WACXZ,IAEAjB,EAAU,oBAEVoB,EAAQ","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define('bodyScroll', factory) :\n    (global = global || self, global.bodyScroll = factory());\n}(this, (function () { 'use strict';\n\n    const NAMESPACE = \"body-scroll-lock\";\n\n    const $head = document.head;\n    const $html = document.documentElement;\n    const $body = document.body;\n\n    const $style =\n        $head.querySelector(`#${NAMESPACE}`) ||\n        (() => {\n            const $style = document.createElement(\"style\");\n\n            $style.id = NAMESPACE;\n\n            return $style;\n        })();\n\n    /**\n     *\n     */\n    let _x = 0;\n    let _y = 0;\n\n    /**\n     *\n     */\n    const save = () => {\n        _x = window.pageXOffset;\n        _y = window.pageYOffset;\n    };\n\n    /**\n     *\n     */\n    const restore = () => window.scrollTo(_x, _y);\n\n    /**\n     * Checks if the style element is in the tag head or not\n     * @returns {boolean} true if present\n     */\n    const _styleExists = () => $style.parentNode === $head;\n\n    /**\n     *\n     * @param {boolean} locked\n     * @returns {number}\n     */\n    const _getClientWidth = locked => {\n        $body.style.width = locked\n            ? `${$html.getBoundingClientRect().width}px`\n            : \"\";\n        $html.style.overflow = locked ? \"hidden\" : \"\";\n\n        return $html.getBoundingClientRect().width;\n    };\n\n    /**\n     *\n     * @param {string} eventName\n     */\n    const _dispatch = eventName =>\n        typeof window.CustomEvent === \"function\"\n            ? window.dispatchEvent(new CustomEvent(eventName))\n            : () => {};\n\n    /**\n     *\n     */\n    const _lock = () => {\n        save();\n        $style.disabled = false;\n\n        const index = 0;\n\n        if (!_styleExists()) {\n            $head.appendChild($style);\n        }\n\n        if ($style.sheet.cssRules[index]) {\n            $style.sheet.deleteRule(index);\n        }\n\n        $style.sheet.insertRule(\n            `:root {\n            --${NAMESPACE}-top-rect: ${window.scrollY * -1}px!important;\n            --${NAMESPACE}-scrollbar-gap: ${_getClientWidth(true) -\n            _getClientWidth(false)}px!important;\n        }`,\n            index\n        );\n\n        $html.classList.add(NAMESPACE);\n    };\n\n    /**\n     *\n     */\n    const _unlock = () => {\n        $html.classList.remove(NAMESPACE);\n\n        restore();\n\n        $style.disabled = true;\n    };\n\n    /**\n     *\n     */\n    const _resize = mode => window[`${mode}EventListener`](\"resize\", update);\n\n    /**\n     *\n     */\n    /**\n     * Returns whether the body scroll is locked or not\n     * @returns {boolean} The body scroll lock state\n     */\n    const isLocked = () =>\n        _styleExists() && !$style.disabled && $html.classList.contains(NAMESPACE);\n\n    /**\n     *\n     */\n    const update = () => {\n        if (!isLocked()) {\n            return;\n        }\n\n        _unlock();\n\n        _lock();\n    };\n\n    /**\n     *\n     */\n    const lock = () => {\n        _lock();\n\n        _dispatch(\"bodyscrolllock\");\n\n        _resize(\"add\");\n    };\n\n    /**\n     *\n     */\n    const unlock = () => {\n        _unlock();\n\n        _dispatch(\"bodyscrollunlock\");\n\n        _resize(\"remove\");\n    };\n\n    var Api = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        isLocked: isLocked,\n        update: update,\n        lock: lock,\n        unlock: unlock\n    });\n\n    return Api;\n\n})));\n"],"file":"body-scroll.es5.min.js"}