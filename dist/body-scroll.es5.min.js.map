{"version":3,"sources":["body-scroll.mjs"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","global","factory","exports","module","define","amd","self","bodyScroll","NAMESPACE","$head","document","head","$html","documentElement","$body","body","$style","querySelector","concat","createElement","id","_x","_y","_styleExists","parentNode","_getClientWidth","locked","style","width","clientWidth","overflow","_dispatch","eventName","window","CustomEvent","dispatchEvent","_lock","pageXOffset","pageYOffset","disabled","appendChild","sheet","cssRules","deleteRule","insertRule","scrollY","classList","add","_unlock","remove","scrollTo","_resize","mode","update","isLocked","contains","Object","freeze","__proto__","lock","unlock"],"mappings":"AAAA,aAEA,SAASA,QAAQC,GAAwT,OAAtOD,QAArD,mBAAXE,QAAoD,iBAApBA,OAAOC,SAAmC,SAAiBF,GAAO,cAAcA,GAA2B,SAAiBA,GAAO,OAAOA,GAAyB,mBAAXC,QAAyBD,EAAIG,cAAgBF,QAAUD,IAAQC,OAAOG,UAAY,gBAAkBJ,IAAyBA,IAExV,SAAWK,EAAQC,GACqD,YAAlD,oBAAZC,QAA0B,YAAcR,QAAQQ,WAA4C,oBAAXC,OAAyBA,OAAOD,QAAUD,IAA8B,mBAAXG,QAAyBA,OAAOC,IAAMD,OAAO,aAAcH,IAAYD,EAASA,GAAUM,MAAaC,WAAaN,IAD5Q,MAEG,EAAQ,WAGT,IAAIO,EAAY,mBACZC,EAAQC,SAASC,KACjBC,EAAQF,SAASG,gBACjBC,EAAQJ,SAASK,KAEjBC,EAASP,EAAMQ,cAAc,IAAIC,OAAOV,KAAe,WACzD,IAAIQ,EAASN,SAASS,cAAc,SAEpC,OADAH,EAAOI,GAAKZ,EACLQ,EAHkD,GAMvDK,EAAK,EACLC,EAAK,EAWLC,EAAe,WACjB,OAAOP,EAAOQ,aAAef,GAG3BgB,EAAkB,SAAyBC,GAG7C,OAFAZ,EAAMa,MAAMC,MAAQF,EAAS,GAAGR,OAAON,EAAMiB,YAAa,MAAQ,GAClEjB,EAAMe,MAAMG,SAAWJ,EAAS,SAAW,GACpCd,EAAMiB,aAGXE,EAAY,SAAmBC,GACjC,MAAqC,mBAAvBC,OAAOC,YAA6BD,OAAOE,cAAc,IAAID,YAAYF,IAAc,cAGnGI,EAAQ,WAtBVf,EAAKY,OAAOI,YACZf,EAAKW,OAAOK,YAuBZtB,EAAOuB,UAAW,EAGbhB,KACHd,EAAM+B,YAAYxB,GAGhBA,EAAOyB,MAAMC,SANL,IAOV1B,EAAOyB,MAAME,WAPH,GAUZ3B,EAAOyB,MAAMG,WAAW,0BAA0B1B,OAAOV,EAAW,eAAeU,QAAyB,EAAlBe,OAAOY,QAAc,iCAAiC3B,OAAOV,EAAW,oBAAoBU,OAAOO,GAAgB,GAAQA,GAAgB,GAAQ,4BAVjO,GAWZb,EAAMkC,UAAUC,IAAIvC,IAGlBwC,EAAU,WACZpC,EAAMkC,UAAUG,OAAOzC,GAnChByB,OAAOiB,SAAS7B,EAAIC,GAqC3BN,EAAOuB,UAAW,GAGhBY,EAAU,SAAiBC,GAC7B,OAAOnB,OAAO,GAAGf,OAAOkC,EAAM,kBAAkB,SAAUC,IAGxDC,EAAW,WACb,OAAO/B,MAAmBP,EAAOuB,UAAY3B,EAAMkC,UAAUS,SAAS/C,IAGpE6C,EAAS,WACNC,MAILN,IAEAZ,MA0BF,OAPUoB,OAAOC,OAAO,CACtBC,UAAW,KACXJ,SAAUA,EACVD,OAAQA,EACRM,KApBS,WACTvB,IAEAL,EAAU,kBAEVoB,EAAQ,QAgBRS,OAbW,WACXZ,IAEAjB,EAAU,oBAEVoB,EAAQ","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define('bodyScroll', factory) :\n    (global = global || self, global.bodyScroll = factory());\n}(this, (function () { 'use strict';\n\n    const NAMESPACE = \"body-scroll-lock\";\r\n\r\n    const $head = document.head;\r\n    const $html = document.documentElement;\r\n    const $body = document.body;\r\n\r\n    const $style =\r\n        $head.querySelector(`#${NAMESPACE}`) ||\r\n        (() => {\r\n            const $style = document.createElement(\"style\");\r\n\r\n            $style.id = NAMESPACE;\r\n\r\n            return $style;\r\n        })();\n\n    /**\r\n     *\r\n     */\r\n    let _x = 0;\r\n    let _y = 0;\r\n\r\n    /**\r\n     *\r\n     */\r\n    const save = () => {\r\n        _x = window.pageXOffset;\r\n        _y = window.pageYOffset;\r\n    };\r\n\r\n    /**\r\n     *\r\n     */\r\n    const restore = () => window.scrollTo(_x, _y);\n\n    /**\r\n     * Checks if the style element is in the tag head or not\r\n     * @returns {boolean} true if present\r\n     */\r\n    const _styleExists = () => $style.parentNode === $head;\r\n\r\n    /**\r\n     *\r\n     * @param {boolean} locked\r\n     * @returns {number}\r\n     */\r\n    const _getClientWidth = locked => {\r\n        $body.style.width = locked ? `${$html.clientWidth}px` : \"\";\r\n        $html.style.overflow = locked ? \"hidden\" : \"\";\r\n\r\n        return $html.clientWidth;\r\n    };\r\n\r\n    /**\r\n     *\r\n     * @param {string} eventName\r\n     */\r\n    const _dispatch = eventName =>\r\n        typeof window.CustomEvent === \"function\"\r\n            ? window.dispatchEvent(new CustomEvent(eventName))\r\n            : () => {};\r\n\r\n    /**\r\n     *\r\n     */\r\n    const _lock = () => {\r\n        save();\r\n        $style.disabled = false;\r\n\r\n        const index = 0;\r\n\r\n        if (!_styleExists()) {\r\n            $head.appendChild($style);\r\n        }\r\n\r\n        if ($style.sheet.cssRules[index]) {\r\n            $style.sheet.deleteRule(index);\r\n        }\r\n\r\n        $style.sheet.insertRule(\r\n            `:root {\r\n            --${NAMESPACE}-top-rect: ${window.scrollY * -1}px!important;\r\n            --${NAMESPACE}-scrollbar-gap: ${_getClientWidth(true) -\r\n            _getClientWidth(false)}px!important;\r\n        }`,\r\n            index\r\n        );\r\n\r\n        $html.classList.add(NAMESPACE);\r\n    };\r\n\r\n    /**\r\n     *\r\n     */\r\n    const _unlock = () => {\r\n        $html.classList.remove(NAMESPACE);\r\n\r\n        restore();\r\n\r\n        $style.disabled = true;\r\n    };\r\n\r\n    /**\r\n     *\r\n     */\r\n    const _resize = mode => window[`${mode}EventListener`](\"resize\", update);\r\n\r\n    /**\r\n     *\r\n     */\r\n    /**\r\n     * Returns whether the body scroll is locked or not\r\n     * @returns {boolean} The body scroll lock state\r\n     */\r\n    const isLocked = () =>\r\n        _styleExists() && !$style.disabled && $html.classList.contains(NAMESPACE);\r\n\r\n    /**\r\n     *\r\n     */\r\n    const update = () => {\r\n        if (!isLocked()) {\r\n            return;\r\n        }\r\n\r\n        _unlock();\r\n\r\n        _lock();\r\n    };\r\n\r\n    /**\r\n     *\r\n     */\r\n    const lock = () => {\r\n        _lock();\r\n\r\n        _dispatch(\"bodyscrolllock\");\r\n\r\n        _resize(\"add\");\r\n    };\r\n\r\n    /**\r\n     *\r\n     */\r\n    const unlock = () => {\r\n        _unlock();\r\n\r\n        _dispatch(\"bodyscrollunlock\");\r\n\r\n        _resize(\"remove\");\r\n    };\n\n    var Api = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        isLocked: isLocked,\n        update: update,\n        lock: lock,\n        unlock: unlock\n    });\n\n    return Api;\n\n})));\n"],"file":"body-scroll.es5.min.js"}