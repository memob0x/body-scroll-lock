{"version":3,"sources":["body-scroll.mjs"],"names":["global","factory","exports","module","define","amd","self","bodyScroll","NAMESPACE","$head","document","head","$html","documentElement","$body","body","$style","querySelector","createElement","id","supportsCustomEvents","window","CustomEvent","_x","_y","save","scrollX","scrollY","restore","scrollTo","_styleExists","parentNode","_getClientWidth","locked","style","width","clientWidth","overflow","_dispatch","eventName","dispatchEvent","_lock","disabled","index","appendChild","sheet","cssRules","deleteRule","insertRule","classList","add","_unlock","remove","_resize","mode","update","isLocked","contains","lock","unlock","Api","Object","freeze","__proto__"],"mappings":"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","file":"body-scroll.es5.js","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define('bodyScroll', factory) :\n    (global = global || self, global.bodyScroll = factory());\n}(this, (function () { 'use strict';\n\n    const NAMESPACE = \"body-scroll-lock\";\n\n    const $head = document.head;\n    const $html = document.documentElement;\n    const $body = document.body;\n\n    const $style =\n        $head.querySelector(`#${NAMESPACE}`) ||\n        (() => {\n            const $style = document.createElement(\"style\");\n\n            $style.id = NAMESPACE;\n\n            return $style;\n        })();\n\n    const supportsCustomEvents = typeof window.CustomEvent === \"function\";\n\n    /**\n     *\n     */\n    let _x = 0;\n    let _y = 0;\n\n    /**\n     *\n     */\n    const save = () => {\n        _x = window.scrollX;\n        _y = window.scrollY;\n    };\n\n    /**\n     *\n     */\n    const restore = () => window.scrollTo(_x, _y);\n\n    /**\n     * Checks if the style element is in the tag head or not\n     * @returns {boolean} true if present\n     */\n    const _styleExists = () => $style.parentNode === $head;\n\n    /**\n     *\n     * @param {boolean} locked\n     * @returns {number}\n     */\n    const _getClientWidth = locked => {\n        $body.style.width = locked ? `${$html.clientWidth}px` : \"\";\n        $html.style.overflow = locked ? \"hidden\" : \"\";\n\n        return $html.clientWidth;\n    };\n\n    /**\n     *\n     * @param {string} eventName\n     */\n    const _dispatch = eventName =>\n        supportsCustomEvents\n            ? window.dispatchEvent(new CustomEvent(eventName))\n            : () => {};\n\n    /**\n     *\n     */\n    const _lock = () => {\n        save();\n        $style.disabled = false;\n\n        const index = 0;\n\n        if (!_styleExists()) {\n            $head.appendChild($style);\n        }\n\n        if ($style.sheet.cssRules[index]) {\n            $style.sheet.deleteRule(index);\n        }\n\n        $style.sheet.insertRule(\n            `:root {\n            --${NAMESPACE}-top-rect: ${window.scrollY * -1}px!important;\n            --${NAMESPACE}-scrollbar-gap: ${_getClientWidth(true) -\n            _getClientWidth(false)}px!important;\n        }`,\n            index\n        );\n\n        $html.classList.add(NAMESPACE);\n    };\n\n    /**\n     *\n     */\n    const _unlock = () => {\n        $html.classList.remove(NAMESPACE);\n\n        restore();\n\n        $style.disabled = true;\n    };\n\n    /**\n     *\n     */\n    const _resize = mode => window[`${mode}EventListener`](\"resize\", update);\n\n    /**\n     *\n     */\n    /**\n     * Returns whether the body scroll is locked or not\n     * @returns {boolean} The body scroll lock state\n     */\n    const isLocked = () =>\n        _styleExists() && !$style.disabled && $html.classList.contains(NAMESPACE);\n\n    /**\n     *\n     */\n    const update = () => {\n        if (!isLocked()) {\n            return;\n        }\n\n        _unlock();\n\n        _lock();\n    };\n\n    /**\n     *\n     */\n    const lock = () => {\n        _lock();\n\n        _dispatch(\"bodyscrolllock\");\n\n        _resize(\"add\");\n    };\n\n    /**\n     *\n     */\n    const unlock = () => {\n        _unlock();\n\n        _dispatch(\"bodyscrollunlock\");\n\n        _resize(\"remove\");\n    };\n\n    var Api = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        isLocked: isLocked,\n        update: update,\n        lock: lock,\n        unlock: unlock\n    });\n\n    return Api;\n\n})));\n"]}