{"version":3,"sources":["body-scroll.mjs"],"names":["global","factory","exports","module","define","amd","self","bodyScroll","NAMESPACE","$head","document","head","$html","documentElement","$body","body","$style","querySelector","createElement","id","_x","_y","save","window","pageXOffset","pageYOffset","restore","scrollTo","_styleExists","parentNode","_getClientWidth","locked","style","width","clientWidth","overflow","_dispatch","eventName","CustomEvent","dispatchEvent","_lock","disabled","index","appendChild","sheet","cssRules","deleteRule","insertRule","scrollY","classList","add","_unlock","remove","_resize","mode","update","isLocked","contains","lock","unlock","Api","Object","freeze","__proto__"],"mappings":"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","file":"body-scroll.es5.js","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define('bodyScroll', factory) :\n    (global = global || self, global.bodyScroll = factory());\n}(this, (function () { 'use strict';\n\n    const NAMESPACE = \"body-scroll-lock\";\r\n\r\n    const $head = document.head;\r\n    const $html = document.documentElement;\r\n    const $body = document.body;\r\n\r\n    const $style =\r\n        $head.querySelector(`#${NAMESPACE}`) ||\r\n        (() => {\r\n            const $style = document.createElement(\"style\");\r\n\r\n            $style.id = NAMESPACE;\r\n\r\n            return $style;\r\n        })();\n\n    /**\r\n     *\r\n     */\r\n    let _x = 0;\r\n    let _y = 0;\r\n\r\n    /**\r\n     *\r\n     */\r\n    const save = () => {\r\n        _x = window.pageXOffset;\r\n        _y = window.pageYOffset;\r\n    };\r\n\r\n    /**\r\n     *\r\n     */\r\n    const restore = () => window.scrollTo(_x, _y);\n\n    /**\r\n     * Checks if the style element is in the tag head or not\r\n     * @returns {boolean} true if present\r\n     */\r\n    const _styleExists = () => $style.parentNode === $head;\r\n\r\n    /**\r\n     *\r\n     * @param {boolean} locked\r\n     * @returns {number}\r\n     */\r\n    const _getClientWidth = locked => {\r\n        $body.style.width = locked ? `${$html.clientWidth}px` : \"\";\r\n        $html.style.overflow = locked ? \"hidden\" : \"\";\r\n\r\n        return $html.clientWidth;\r\n    };\r\n\r\n    /**\r\n     *\r\n     * @param {string} eventName\r\n     */\r\n    const _dispatch = eventName =>\r\n        typeof window.CustomEvent === \"function\"\r\n            ? window.dispatchEvent(new CustomEvent(eventName))\r\n            : () => {};\r\n\r\n    /**\r\n     *\r\n     */\r\n    const _lock = () => {\r\n        save();\r\n        $style.disabled = false;\r\n\r\n        const index = 0;\r\n\r\n        if (!_styleExists()) {\r\n            $head.appendChild($style);\r\n        }\r\n\r\n        if ($style.sheet.cssRules[index]) {\r\n            $style.sheet.deleteRule(index);\r\n        }\r\n\r\n        $style.sheet.insertRule(\r\n            `:root {\r\n            --${NAMESPACE}-top-rect: ${window.scrollY * -1}px!important;\r\n            --${NAMESPACE}-scrollbar-gap: ${_getClientWidth(true) -\r\n            _getClientWidth(false)}px!important;\r\n        }`,\r\n            index\r\n        );\r\n\r\n        $html.classList.add(NAMESPACE);\r\n    };\r\n\r\n    /**\r\n     *\r\n     */\r\n    const _unlock = () => {\r\n        $html.classList.remove(NAMESPACE);\r\n\r\n        restore();\r\n\r\n        $style.disabled = true;\r\n    };\r\n\r\n    /**\r\n     *\r\n     */\r\n    const _resize = mode => window[`${mode}EventListener`](\"resize\", update);\r\n\r\n    /**\r\n     *\r\n     */\r\n    /**\r\n     * Returns whether the body scroll is locked or not\r\n     * @returns {boolean} The body scroll lock state\r\n     */\r\n    const isLocked = () =>\r\n        _styleExists() && !$style.disabled && $html.classList.contains(NAMESPACE);\r\n\r\n    /**\r\n     *\r\n     */\r\n    const update = () => {\r\n        if (!isLocked()) {\r\n            return;\r\n        }\r\n\r\n        _unlock();\r\n\r\n        _lock();\r\n    };\r\n\r\n    /**\r\n     *\r\n     */\r\n    const lock = () => {\r\n        _lock();\r\n\r\n        _dispatch(\"bodyscrolllock\");\r\n\r\n        _resize(\"add\");\r\n    };\r\n\r\n    /**\r\n     *\r\n     */\r\n    const unlock = () => {\r\n        _unlock();\r\n\r\n        _dispatch(\"bodyscrollunlock\");\r\n\r\n        _resize(\"remove\");\r\n    };\n\n    var Api = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        isLocked: isLocked,\n        update: update,\n        lock: lock,\n        unlock: unlock\n    });\n\n    return Api;\n\n})));\n"]}