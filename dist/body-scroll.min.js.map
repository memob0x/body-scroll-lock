{"version":3,"sources":["body-scroll.mjs"],"names":["_objectSpread","target","i","arguments","length","source","ownKeys","Object","keys","getOwnPropertySymbols","concat","filter","sym","getOwnPropertyDescriptor","enumerable","forEach","key","_defineProperty","obj","value","defineProperty","configurable","writable","_typeof","Symbol","iterator","constructor","prototype","global","factory","exports","module","define","amd","bodyScroll","status","setStatus","bool","undefined","settings","incubator","important","overflowHidden","html","document","documentElement","body","getElementsByTagName","head","styler","createElement","type","id","setStyle","css","styleSheet","cssText","innerHTML","appendChild","createTextNode","querySelector","remove","s4","Math","random","toString","substring","BodyScrollEvent","window","CustomEvent","event","params","bubbles","cancelable","detail","evt","createEvent","initCustomEvent","Event","state","scroll","top","left","behavior","dimensions","width","height","scrollbar","y","x","corrections","defaults","selector","property","inverted","supportedProperty","getCorrections","entry","gap","scrollbars","indexOf","factor","lock","vw","innerWidth","vh","innerHeight","clientWidth","clientHeight","scrollTop","scrollLeft","scrollWidth","scrollHeight","firstChild","append","imp","dispatchEvent","unlock","before","scrollTo","timer","addEventListener","clearTimeout","setTimeout","toggle","setCorrections","collection","collectionType","Array","isArray","entryType","push","isLocked","setOptions","options"],"mappings":"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","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define('bodyScroll', factory) :\n    (global.bodyScroll = factory());\n}(this, (function () { 'use strict';\n\n    let status = false;\n    const setStatus = (bool = true) => (status = bool);\n\n    let settings = {\n        incubator: false, // experimental feature\n        important: true,\n        overflowHidden: false\n    };\n\n    const setOptions = (options = {}) => {\n        if (!status) {\n            settings = { ...settings, ...options };\n        }\n    };\n\n    const html = document.documentElement;\n    const body = document.body || document.getElementsByTagName('body')[0];\n    const head = document.head || document.getElementsByTagName('head')[0];\n\n    const stylerID = 'body-scroll';\n    const styler = document.createElement('style');\n    styler.type = 'text/css';\n    styler.id = stylerID;\n\n    const setStyle = (css = '') => {\n        if (!css) {\n            styler.remove();\n\n            return;\n        }\n\n        if (styler.styleSheet) {\n            styler.styleSheet.cssText = css;\n        } else {\n            styler.innerHTML = '';\n            styler.appendChild(document.createTextNode(css));\n        }\n\n        if (!head.querySelector('style#' + stylerID)) {\n            head.appendChild(styler);\n        }\n    };\n\n    const incubator = (incubator => {\n        const s4 = function() {\n            return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\n        };\n\n        incubator.id = `body-scroll-lock-${s4()}${s4()}-${s4()}-${s4()}-${s4()}-${s4()}${s4()}${s4()}`;\n\n        return incubator;\n    })(document.createElement('div'));\n\n    const BodyScrollEvent = (() => {\n        if (typeof window.CustomEvent === 'function') {\n            return window.CustomEvent;\n        }\n\n        function CustomEvent(event, params) {\n            params = params || {\n                bubbles: false,\n                cancelable: false,\n                detail: undefined\n            };\n\n            const evt = document.createEvent('CustomEvent');\n\n            evt.initCustomEvent(\n                event,\n                params.bubbles,\n                params.cancelable,\n                params.detail\n            );\n\n            return evt;\n        }\n\n        CustomEvent.prototype = window.Event.prototype;\n\n        return CustomEvent;\n    })();\n\n    let state = {\n        scroll: {\n            top: 0,\n            left: 0,\n            behavior: 'auto'\n        },\n        dimensions: {\n            width: 0,\n            height: 0\n        },\n        scrollbar: {\n            y: 0,\n            x: 0\n        }\n    };\n\n    const setState = () => {\n        const vw = window.innerWidth;\n        const vh = window.innerHeight;\n        const width = html.clientWidth;\n        const height = html.clientHeight;\n        const scroll = {\n            top: html.scrollTop,\n            left: html.scrollLeft\n        };\n        const scrollbars = {\n            y: vw > width ? vw - width : 0,\n            x: vh > height ? vh - height : 0\n        };\n\n        state = {\n            ...state,\n            ...{\n                scroll: scroll,\n                html: {\n                    width: vw + scroll.left - scrollbars.y,\n                    height: vh + scroll.top - scrollbars.x\n                },\n                body: {\n                    width: html.scrollWidth,\n                    height: html.scrollHeight\n                },\n                scrollbars: scrollbars\n            }\n        };\n    };\n\n    let corrections = [];\n\n    const defaults = {\n        selector: null,\n        property: 'margin-right',\n        inverted: false\n    };\n\n    const supportedProperty = [\n        'margin-right',\n        'margin-bottom',\n        'padding-right',\n        'padding-bottom',\n        'right',\n        'bottom'\n    ];\n\n    const setCorrections = (collection = []) => {\n        corrections = [];\n\n        const collectionType = typeof collection;\n        if (\n            collectionType === 'string' ||\n            (!Array.isArray(collection) && collectionType === 'object')\n        ) {\n            collection = [collection];\n        }\n\n        collection.forEach(entry => {\n            if (entry) {\n                const entryType = typeof entry;\n\n                if (entryType === 'string') {\n                    corrections.push({\n                        ...defaults,\n                        ...{\n                            selector: entry\n                        }\n                    });\n                }\n\n                if (\n                    !Array.isArray(entry) &&\n                    entryType === 'object' &&\n                    entry.selector &&\n                    (!entry.property ||\n                        supportedProperty.indexOf(entry.property) > -1)\n                ) {\n                    corrections.push({\n                        ...defaults,\n                        ...entry\n                    });\n                }\n            }\n        });\n    };\n\n    const getCorrections = (inverted = false) => {\n        let css = '';\n\n        if (corrections.length) {\n            corrections.forEach(entry => {\n                const gap =\n                    state.scrollbars[\n                        entry.property.indexOf('right') > -1 ? 'y' : 'x'\n                    ];\n\n                if (gap > 0) {\n                    let factor = 1;\n\n                    if (inverted) {\n                        factor = entry.inverted ? -1 : 0;\n                    }\n\n                    css += `\n                ${entry.selector} {\n                    ${entry.property}: ${gap * factor}px${\n                    settings.important ? '!important' : ''\n                };\n                }`;\n                }\n            });\n        }\n\n        return css;\n    };\n\n    const lock = () => {\n        if (!status) {\n            // snapshot of current state\n            setState();\n\n            //\n            if (settings.incubator) {\n                incubator.innerHTML = '';\n                while (body.firstChild) {\n                    incubator.append(body.firstChild);\n                }\n                body.append(incubator);\n            }\n\n            const imp = settings.important ? '!important' : '';\n\n            setStyle(`\n            html,\n            body\n            ${settings.incubator ? ', #' + incubator.id : ''} {\n                margin: 0${imp};\n                padding: 0${imp};\n                min-width: auto${imp};\n                min-height: auto${imp};\n                max-width: none${imp};\n                max-height: none${imp};\n            }\n\n            html\n            ${settings.incubator ? ', body' : ''} {\n                width: ${state.html.width}px${imp};\n                height: ${state.html.height}px${imp};\n            }\n\n            html {\n                position: fixed${imp};\n                top: ${state.scroll.top * -1}px${imp};\n                left: ${state.scroll.left * -1}px${imp};\n            }\n\n            html,\n            body {              \n                overflow: ${\n                    settings.overflowHidden ? 'hidden' : 'visible'\n                }${imp};\n            }\n\n            ${settings.incubator ? '#' + incubator.id : 'body'} {\n                width: ${state.body.width}px${imp};\n                height: ${state.body.height}px${imp};\n                ${settings.incubator ? `position: relative${imp};` : ''}\n            }\n            \n            ${getCorrections()}`);\n\n            setStatus(true);\n\n            window.dispatchEvent(new BodyScrollEvent('bodyScrollLock'));\n        }\n    };\n\n    const unlock = () => {\n        if (status) {\n            setStyle(getCorrections(true));\n\n            if (settings.incubator) {\n                while (incubator.firstChild) {\n                    incubator.before(incubator.firstChild);\n                }\n                incubator.remove();\n            }\n\n            window.scrollTo(state.scroll);\n\n            setStatus(false);\n\n            window.dispatchEvent(new BodyScrollEvent('bodyScrollUnlock'));\n        }\n    };\n\n    const toggle = () => (!status ? lock() : unlock());\n\n    let timer = null;\n\n    window.addEventListener('resize', () => {\n        clearTimeout(timer);\n        \n        timer = setTimeout(() => {\n            if (status) {\n                unlock();\n\n                lock();\n            }\n        }, 500);\n    });\n\n    var bodyScroll = {\n        lock: lock,\n        unlock: unlock,\n        toggle: toggle,\n        setCorrections: setCorrections,\n        isLocked: () => status,\n        setOptions: setOptions\n    };\n\n    return bodyScroll;\n\n})));\n"],"file":"body-scroll.min.js"}