{"version":3,"sources":["body-scroll.mjs"],"names":["_objectSpread","target","i","arguments","length","source","ownKeys","Object","keys","getOwnPropertySymbols","concat","filter","sym","getOwnPropertyDescriptor","enumerable","forEach","key","_defineProperty","obj","value","defineProperty","configurable","writable","_typeof","Symbol","iterator","constructor","prototype","global","factory","exports","module","define","amd","bodyScroll","html","document","documentElement","body","getElementsByTagName","head","stylesIncubator","createElement","type","styler","status","setStatus","bool","undefined","scrollState","top","left","behavior","s4","Math","floor","random","toString","substring","uniqueID","scrollbarGapSelectors","defaults","selector","property","lock","vw","vh","hw","hh","scrollbars","hasScrollbarsGapSelectors","scrollState$$1","setScrollState","scrollTop","scrollLeft","bw","clientWidth","bh","clientHeight","offsetWidth","offsetHeight","window","innerWidth","innerHeight","y","x","css","entry","heystack","needle","gap","String","includes","indexOf","styleSheet","cssText","innerHTML","appendChild","createTextNode","unlock","remove","scrollTo","namespacesKey","_requestAnimationFrame","requestAnimationFrame","_cancelAnimationFrame","cancelAnimationFrame","vendor","_polyfill","element","event","handler","options","supportAnimationFrameTimers","CustomEvent","params","bubbles","cancelable","detail","evt","createEvent","initCustomEvent","Event","requests","requestTimeout","fn","delay","setTimeout","start","Date","now","id","loop","call","cancelTimeout","clearTimer","callback","wait","immediate","timer","_this","this","_len","args","Array","_key","apply","debounce","addEventListener","split","registerScrollbarGapSelectors","collection","collectionType","isArray","entryType","push","isLocked"],"mappings":"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","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define('bodyScroll', factory) :\n    (global.bodyScroll = factory());\n}(this, (function () { 'use strict';\n\n    const html = document.documentElement;\n    const body = document.body || document.getElementsByTagName('body')[0];\n    const head = document.head || document.getElementsByTagName('head')[0];\n\n    const stylesIncubator = document.createElement('style');\n    stylesIncubator.type = 'text/css';\n    const styler = stylesIncubator;\n\n    let status = false;\n    const setStatus = (bool = true) => (status = bool);\n\n    let scrollState = {\n        top: 0,\n        left: 0,\n        behavior: 'auto'\n    };\n    const setScrollState = (obj = {}) =>\n        (scrollState = {\n            ...scrollState,\n            ...obj\n        });\n\n    /**\n     * @param {string} prop\n     * @param {string} value\n     * @returns {boolean}\n     */\n\n    const s4 = () =>\n        Math.floor((1 + Math.random()) * 0x10000)\n            .toString(16)\n            .substring(1);\n    /**\n     * @returns {string}\n     */\n    const uniqueID = () => s4() + s4() + '-' + s4() + '-' + s4() + '-' + s4() + '-' + s4() + s4() + s4();\n\n    /**\n     * @param {string} heystack\n     * @param {string} needle\n     * @returns {boolean}\n     */\n    const stringContains = (heystack, needle) => (String.prototype.includes ? heystack.includes(needle) : heystack.indexOf(needle, 0) !== -1);\n\n    let scrollbarGapSelectors = [];\n    const defaults = {\n        selector: null,\n        property: 'margin-right'\n    };\n    const registerScrollbarGapSelectors = (collection = []) => {\n        scrollbarGapSelectors = [];\n        \n        const collectionType = typeof collection;\n        if (collectionType === 'string' || (!Array.isArray(collection) && collectionType === 'object')) {\n            collection = [collection];\n        }\n\n        collection.forEach(entry => {\n            if (entry) {\n                const entryType = typeof entry;\n\n                if (entryType === 'string') {\n                    scrollbarGapSelectors.push({\n                        ...defaults,\n                        ...{\n                            selector: entry\n                        }\n                    });\n                }\n\n                if (\n                    !Array.isArray(entry) &&\n                    entryType === 'object' &&\n                    entry.selector &&\n                    (!entry.property ||\n                        (entry.property === 'margin-right' || entry.property === 'margin-bottom' || entry.property === 'padding-right' || entry.property === 'padding-bottom'))\n                ) {\n                    scrollbarGapSelectors.push({\n                        ...defaults,\n                        ...entry\n                    });\n                }\n            }\n        });\n    };\n\n    const lock = () => {\n        if (!status) {\n            let vw = 0;\n            let vh = 0;\n            let hw = 0;\n            let hh = 0;\n            let scrollbars = {};\n\n            const hasScrollbarsGapSelectors = scrollbarGapSelectors.length;\n\n            const scrollState$$1 = setScrollState({\n                top: html.scrollTop,\n                left: html.scrollLeft\n            });\n            let bw = body.clientWidth;\n            let bh = body.clientHeight;\n            bw -= bw - body.offsetWidth;\n            bh -= bh - body.offsetHeight;\n            if (hasScrollbarsGapSelectors) {\n                vw = window.innerWidth;\n                vh = window.innerHeight;\n                hw = html.clientWidth;\n                hh = html.clientHeight;\n                scrollbars = {\n                    y: vw > hw ? vw - hw : 0,\n                    x: vh > hh ? vh - hh : 0\n                };\n            }\n\n            let css = `\n        html {\n            overflow: visible!important;\n            margin-right: 0!important;\n        }\n        html,\n        body {\n            padding-right: 0!important;\n            min-width: ${bw}px!important;\n            width: ${bw}px!important;\n            max-width: ${bw}px!important;\n            min-height: ${bh}px!important;\n            height: ${bh}px!important;\n            max-height: ${bh}px!important;\n        }\n        body {\n            overflow: hidden!important;\n            position: fixed!important;\n            top: 0!important;\n            left: 0!important;\n            right: auto!important;\n            bottom: auto!important;\n            margin: -${scrollState$$1.top}px 0 0 -${scrollState$$1.left}px!important;\n        }`;\n\n            if (hasScrollbarsGapSelectors) {\n                scrollbarGapSelectors.forEach(entry => {\n                    const gap = scrollbars[stringContains(entry.property, 'right') ? 'y' : 'x'];\n                    if (gap > 0) {\n                        css += `\n                    ${entry.selector} {\n                        ${entry.property}: ${gap}px!important;\n                    }`;\n                    }\n                });\n            }\n\n            if (styler.styleSheet) {\n                styler.styleSheet.cssText = css;\n            } else {\n                styler.innerHTML = '';\n                styler.appendChild(document.createTextNode(css));\n            }\n\n            head.appendChild(styler);\n\n            setStatus(true);\n        }\n    };\n\n    const unlock = () => {\n        if (status) {\n            styler.remove();\n            window.scrollTo(scrollState);\n            setStatus(false);\n        }\n    };\n\n    const namespacesKey = 'namespaces_' + uniqueID();\n\n    /**\n     * @param {HTMLElement} element\n     * @param {string} event\n     * @param {Function} handler\n     * @param {Object} options\n     * @returns {undefined}\n     */\n    const addEventListener = (element, event, handler, options) => {\n        if (!element[namespacesKey]) {\n            element[namespacesKey] = {};\n        }\n\n        element[namespacesKey][event] = handler;\n        element.addEventListener(event.split('.')[0], handler, options || false);\n    };\n\n    // TODO: improve this\n    let _requestAnimationFrame = window.requestAnimationFrame;\n    let _cancelAnimationFrame = window.cancelAnimationFrame;\n    ['ms', 'moz', 'webkit', 'o'].forEach(vendor => {\n        _requestAnimationFrame = _requestAnimationFrame || window[vendor + 'RequestAnimationFrame'];\n        _cancelAnimationFrame = _cancelAnimationFrame || window[vendor + 'CancelAnimationFrame'] || window[vendor + 'CancelRequestAnimationFrame'];\n    });\n    const requestAnimationFrame = _requestAnimationFrame;\n    const cancelAnimationFrame = _cancelAnimationFrame;\n\n    const CustomEvent =\n        window.CustomEvent ||\n        (() => {\n            const _polyfill = (event, params) => {\n                params = params || { bubbles: false, cancelable: false, detail: undefined };\n                const evt = document.createEvent('CustomEvent');\n                evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n                return evt;\n            };\n            _polyfill.prototype = window.Event.prototype;\n            return _polyfill;\n        })();\n\n    const supportAnimationFrameTimers = cancelAnimationFrame && requestAnimationFrame;\n\n    const requests = [];\n\n    /**\n     * Behaves the same as setTimeout except uses requestAnimationFrame() where possible for better performance\n     * @param {function} fn The callback function\n     * @param {int} delay The delay in milliseconds\n     */\n\n    const requestTimeout = (fn, delay) => {\n        if (!supportAnimationFrameTimers) {\n            return window.setTimeout(fn, delay);\n        }\n\n        const start = Date.now();\n        const id = uniqueID();\n        const loop = () => {\n            const current = Date.now();\n            const delta = current - start;\n\n            if (delta >= delay) {\n                fn.call();\n            } else {\n                requests[id] = requestAnimationFrame(() => loop());\n            }\n        };\n\n        requests[id] = requestAnimationFrame(() => loop());\n\n        return id;\n    };\n\n    const clearTimer = (type, id) => {\n        if (!supportAnimationFrameTimers) {\n            return window['clear' + type](id);\n        }\n\n        if (id) {\n            cancelAnimationFrame(requests[id]);\n            delete requests[id];\n        }\n\n        return id;\n    };\n\n    const cancelTimeout = id => clearTimer('Timeout', id);\n\n    const debounce = (callback = () => {}, wait = 50, immediate = false) => {\n        let timer = null;\n\n        return function(...args) {\n            cancelTimeout(timer);\n\n            timer = requestTimeout(() => {\n                timer = null;\n\n                if (!immediate) {\n                    callback.apply(this, args);\n                }\n            }, wait);\n\n            if (immediate && !timer) {\n                callback.apply(this, [...args]);\n            }\n        };\n    };\n\n    addEventListener(\n        window,\n        'resize.body-scroll-lock',\n        debounce(() => {\n            if (status) {\n                unlock();\n                lock();\n            }\n        }, 500)\n    );\n\n    var bodyScroll = {\n        lock: lock,\n        unlock: unlock,\n        registerScrollbarGapSelectors: registerScrollbarGapSelectors,\n        isLocked: () => status\n    };\n\n    return bodyScroll;\n\n})));\n"],"file":"body-scroll.min.js"}