{"version":3,"sources":["body-scroll.mjs"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","global","factory","exports","module","define","amd","self","bodyScroll","$head","document","head","$stylerBase","createElement","$stylerResizable","isLegacyIOS","test","window","navigator","userAgent","isMultiTouchMacAkaIOS13","platform","maxTouchPoints","isAppleTouchDevice","status","scroll","x","y","scrollbarWidth","clientWidth","printRules","$actor","rules","innerHTML","parentNode","append","printBaseRules","output","printResizableRules","isLocked","lock","scrollX","scrollY","_clientWidth","documentElement","body","style","width","overflow","dispatchEvent","CustomEvent","detail","unlock","resize","addEventListener","toggle","update"],"mappings":"AAAA,aAEA,SAASA,QAAQC,GAAwT,OAAtOD,QAArD,mBAAXE,QAAoD,iBAApBA,OAAOC,SAAmC,SAAiBF,GAAO,cAAcA,GAA2B,SAAiBA,GAAO,OAAOA,GAAyB,mBAAXC,QAAyBD,EAAIG,cAAgBF,QAAUD,IAAQC,OAAOG,UAAY,gBAAkBJ,IAAyBA,IAExV,SAAWK,EAAQC,GACqD,YAAlD,oBAAZC,QAA0B,YAAcR,QAAQQ,WAA4C,oBAAXC,OAAyBA,OAAOD,QAAUD,IAA8B,mBAAXG,QAAyBA,OAAOC,IAAMD,OAAO,aAAcH,IAAYD,EAASA,GAAUM,MAAaC,WAAaN,IAD5Q,MAEG,EAAQ,WAGT,IAAIO,EAAQC,SAASC,KACjBC,EAAcF,SAASG,cAAc,SACrCC,EAAmBJ,SAASG,cAAc,SAC1CE,EAAc,mBAAmBC,KAAKC,OAAOC,UAAUC,WACvDC,EAAwD,aAA9BH,OAAOC,UAAUG,UAA2BJ,OAAOC,UAAUI,eAAiB,EACxGC,EAAqBR,GAAeK,EAEpCI,GAAS,EACTC,EAAS,CACXC,EAAG,EACHC,EAAG,GAEDC,EAAiB,EACjBC,EAAc,EAoCdC,EAAa,SAAoBC,EAAQC,GAC3CD,EAAOE,UAAYD,EAEfD,EAAOG,aAAezB,GACxBA,EAAM0B,OAAOJ,IAIbK,EAAiB,WACnB,OAAON,EAAWlB,GA1CdyB,EAAS,GACbA,EAAS,SACTA,GAAU,SACVA,GAAU,0BACVA,GAAU,uBACVA,GAAU,cAAgBT,EAAiB,oBAC3CS,GAAU,IAENd,GACFc,GAAU,SACVA,GAAU,6BACVA,GAAU,SAAW,EAAIZ,EAAOE,EAAI,gBACpCU,GAAU,UAAY,EAAIZ,EAAOC,EAAI,gBACrCW,GAAU,+BACVA,GAAU,MAEVA,GAAU,SACVA,GAAU,8BACVA,GAAU,KAGLA,IAtBU,IACbA,GA6CFC,EAAsB,WACxB,OAAOR,EAAWhB,GArBduB,EAAS,GACbA,EAAS,SACTA,GAAU,SACVA,GAAU,UAAYR,EAAc,gBACpCQ,GAAU,MALY,IAClBA,GAwBFE,EAAW,WACb,OAAOf,GAGLgB,EAAO,WACT,GAAIhB,EACF,OAAO,EAGTA,GAAS,EACTC,EAAS,CACPC,EAAGT,OAAOwB,QACVd,EAAGV,OAAOyB,SAEZ,IAAIC,EAAejC,SAASkC,gBAAgBf,YAoB5C,OAnBAnB,SAASmC,KAAKC,MAAMC,MAAQrC,SAASmC,KAAKhB,YAAc,KACxDnB,SAASkC,gBAAgBE,MAAME,SAAW,SAC1CnB,EAAcnB,SAASkC,gBAAgBf,YACvCD,EAAiBC,EAAcc,EAC/BjC,SAASmC,KAAKC,MAAMC,MAAQ,GAC5BrC,SAASkC,gBAAgBE,MAAME,SAAW,GAC1CZ,IACAE,IAEIf,GACFN,OAAOQ,OAAO,EAAG,GAGnBR,OAAOgC,cAAc,IAAIC,YAAY,iBAAkB,CACrDC,OAAQ,CACNtB,YAAaA,EACbD,eAAgBA,OAGb,GAGLwB,EAAS,WACX,QAAK5B,IAILA,GAAS,EACTZ,EAAYqB,UAAY,GACxBnB,EAAiBmB,UAAY,GAEzBV,GACFN,OAAOQ,OAAOA,EAAOC,EAAGD,EAAOE,GAGjCV,OAAOgC,cAAc,IAAIC,YAAY,mBAAoB,CACvDC,OAAQ,CACNtB,YAAaA,EACbD,eAAgBA,OAGb,IAGLyB,EAAS,WACN7B,IAILK,EAAcnB,SAASkC,gBAAgBf,YACvCS,MAaF,OAVA5B,SAAS4C,iBAAiB,SAAUD,GACnB,CACfb,KAAMA,EACNY,OAAQA,EACRG,OAAQ,WACN,OAAQhB,IAAsBa,IAATZ,KAEvBD,SAAUA,EACViB,OAAQH","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define('bodyScroll', factory) :\n    (global = global || self, global.bodyScroll = factory());\n}(this, function () { 'use strict';\n\n    const $head = document.head;\n    const $stylerBase = document.createElement('style');\n    const $stylerResizable = document.createElement('style');\n\n    const isLegacyIOS = /iPad|iPhone|iPod/.test(window.navigator.userAgent);\n    const isMultiTouchMacAkaIOS13 =\n        window.navigator.platform === 'MacIntel' &&\n        window.navigator.maxTouchPoints > 1;\n    const isAppleTouchDevice = isLegacyIOS || isMultiTouchMacAkaIOS13;\n\n    const IMPORTANT_STATEMENT = '!important';\n\n    let status = false;\n    let scroll = {\n        x: 0,\n        y: 0\n    };\n    let scrollbarWidth = 0;\n    let clientWidth = 0;\n\n    const getBaseRules = () => {\n        let output = '';\n        output = ' html,';\n        output += 'body {';\n        output += 'height: auto' + IMPORTANT_STATEMENT + ';';\n        output += 'margin: 0' + IMPORTANT_STATEMENT + ';';\n        output +=\n            'padding: 0 ' + scrollbarWidth + 'px 0 0' + IMPORTANT_STATEMENT + ';';\n        output += '}';\n\n        if (isAppleTouchDevice) {\n            output += 'html {';\n            output += 'position: fixed' + IMPORTANT_STATEMENT + ';';\n            output += 'top: ' + -1 * scroll.y + 'px' + IMPORTANT_STATEMENT + ';';\n            output += 'left: ' + -1 * scroll.x + 'px' + IMPORTANT_STATEMENT + ';';\n            output += 'overflow: visible' + IMPORTANT_STATEMENT + ';';\n            output += '}';\n        } else {\n            output += 'body {';\n            output += 'overflow: hidden' + IMPORTANT_STATEMENT + ';';\n            output += '}';\n        }\n\n        return output;\n    };\n\n    const getResizableRules = () => {\n        let output = '';\n        output = ' html,';\n        output += 'body {';\n        output += 'width: ' + clientWidth + 'px' + IMPORTANT_STATEMENT + ';';\n        output += '}';\n        return output;\n    };\n\n    const printRules = ($actor, rules) => {\n        $actor.innerHTML = rules;\n\n        if ($actor.parentNode !== $head) {\n            $head.append($actor);\n        }\n    };\n\n    const printBaseRules = () => printRules($stylerBase, getBaseRules());\n\n    const printResizableRules = () =>\n        printRules($stylerResizable, getResizableRules());\n\n    const isLocked = () => status;\n\n    const lock = () => {\n        if (status) {\n            return false;\n        }\n\n        status = true;\n\n        scroll = {\n            x: window.scrollX,\n            y: window.scrollY\n        };\n\n        const _clientWidth = document.documentElement.clientWidth;\n        document.body.style.width = document.body.clientWidth + 'px';\n        document.documentElement.style.overflow = 'hidden';\n        clientWidth = document.documentElement.clientWidth;\n        scrollbarWidth = clientWidth - _clientWidth;\n        document.body.style.width = '';\n        document.documentElement.style.overflow = '';\n\n        printBaseRules();\n\n        printResizableRules();\n\n        if (isAppleTouchDevice) {\n            window.scroll(0, 0);\n        }\n\n        window.dispatchEvent(\n            new CustomEvent('bodyScrollLock', {\n                detail: {\n                    clientWidth: clientWidth,\n                    scrollbarWidth: scrollbarWidth\n                }\n            })\n        );\n\n        return true;\n    };\n\n    const unlock = () => {\n        if (!status) {\n            return false;\n        }\n\n        status = false;\n\n        $stylerBase.innerHTML = '';\n        $stylerResizable.innerHTML = '';\n\n        if (isAppleTouchDevice) {\n            window.scroll(scroll.x, scroll.y);\n        }\n\n        window.dispatchEvent(\n            new CustomEvent('bodyScrollUnlock', {\n                detail: {\n                    clientWidth: clientWidth,\n                    scrollbarWidth: scrollbarWidth\n                }\n            })\n        );\n\n        return true;\n    };\n\n    const resize = () => {\n        if (!status) {\n            return;\n        }\n\n        clientWidth = document.documentElement.clientWidth;\n\n        printResizableRules();\n    };\n\n    document.addEventListener('resize', resize);\n\n    var bodyScroll = {\n        lock: lock,\n        unlock: unlock,\n        toggle: () => (!isLocked() ? lock() : unlock()),\n        isLocked: isLocked,\n        update: resize\n    };\n\n    return bodyScroll;\n\n}));\n"],"file":"body-scroll.min.js"}