{"version":3,"sources":["body-scroll.mjs"],"names":["_objectSpread","target","i","arguments","length","source","ownKeys","Object","keys","getOwnPropertySymbols","concat","filter","sym","getOwnPropertyDescriptor","enumerable","forEach","key","_defineProperty","obj","value","defineProperty","configurable","writable","_typeof","Symbol","iterator","constructor","prototype","global","factory","exports","module","define","amd","bodyScroll","status","setStatus","bool","undefined","settings","incubator","important","overflowHidden","html","document","documentElement","body","getElementsByTagName","head","styler","createElement","type","id","_incubator","s4","setStyle","css","styleSheet","cssText","innerHTML","appendChild","createTextNode","querySelector","remove","Math","random","toString","substring","state","scroll","top","left","behavior","dimensions","width","height","scrollbar","y","x","corrections","defaults","selector","property","inverted","supportedProperty","getCorrections","entry","gap","scrollbars","indexOf","factor","lock","vw","window","innerWidth","vh","innerHeight","clientWidth","clientHeight","scrollTop","scrollLeft","scrollWidth","scrollHeight","firstChild","append","imp","unlock","before","scrollTo","timer","addEventListener","clearTimeout","setTimeout","toggle","setCorrections","collection","collectionType","Array","isArray","entryType","push","isLocked","setOptions","options"],"mappings":"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","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define('bodyScroll', factory) :\n    (global.bodyScroll = factory());\n}(this, (function () { 'use strict';\n\n    let status = false;\n    const setStatus = (bool = true) => (status = bool);\n\n    let settings = {\n        incubator: false, // experimental feature\n        important: true,\n        overflowHidden: false\n    };\n\n    const setOptions = (options = {}) => {\n        if (!status) {\n            settings = { ...settings, ...options };\n        }\n    };\n\n    const html = document.documentElement;\n    const body = document.body || document.getElementsByTagName('body')[0];\n    const head = document.head || document.getElementsByTagName('head')[0];\n\n    const stylerID = 'body-scroll';\n    const styler = document.createElement('style');\n    styler.type = 'text/css';\n    styler.id = stylerID;\n\n    const setStyle = (css = '') => {\n        if (!css) {\n            styler.remove();\n\n            return;\n        }\n\n        if (styler.styleSheet) {\n            styler.styleSheet.cssText = css;\n        } else {\n            styler.innerHTML = '';\n            styler.appendChild(document.createTextNode(css));\n        }\n\n        if (!head.querySelector('style#' + stylerID)) {\n            head.appendChild(styler);\n        }\n    };\n\n    const incubator = (_incubator => {\n        const s4 = function() {\n            return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\n        };\n\n        _incubator.id = `body-scroll-lock-${s4()}${s4()}-${s4()}-${s4()}-${s4()}-${s4()}${s4()}${s4()}`;\n\n        return _incubator;\n    })(document.createElement('div'));\n\n    let state = {\n        scroll: {\n            top: 0,\n            left: 0,\n            behavior: 'auto'\n        },\n        dimensions: {\n            width: 0,\n            height: 0\n        },\n        scrollbar: {\n            y: 0,\n            x: 0\n        }\n    };\n\n    const setState = () => {\n        const vw = window.innerWidth;\n        const vh = window.innerHeight;\n        const width = html.clientWidth;\n        const height = html.clientHeight;\n        const scroll = {\n            top: html.scrollTop,\n            left: html.scrollLeft\n        };\n        const scrollbars = {\n            y: vw > width ? vw - width : 0,\n            x: vh > height ? vh - height : 0\n        };\n\n        state = {\n            ...state,\n            ...{\n                scroll: scroll,\n                html: {\n                    width: vw + scroll.left - scrollbars.y,\n                    height: vh + scroll.top - scrollbars.x\n                },\n                body: {\n                    width: html.scrollWidth,\n                    height: html.scrollHeight\n                },\n                scrollbars: scrollbars\n            }\n        };\n    };\n\n    let corrections = [];\n\n    const defaults = {\n        selector: null,\n        property: 'margin-right',\n        inverted: false\n    };\n\n    const supportedProperty = [\n        'margin-right',\n        'margin-bottom',\n        'padding-right',\n        'padding-bottom',\n        'right',\n        'bottom'\n    ];\n\n    const setCorrections = (collection = []) => {\n        corrections = [];\n\n        const collectionType = typeof collection;\n        if (\n            collectionType === 'string' ||\n            (!Array.isArray(collection) && collectionType === 'object')\n        ) {\n            collection = [collection];\n        }\n\n        collection.forEach(entry => {\n            if (entry) {\n                const entryType = typeof entry;\n\n                if (entryType === 'string') {\n                    corrections.push({\n                        ...defaults,\n                        ...{\n                            selector: entry\n                        }\n                    });\n                }\n\n                if (\n                    !Array.isArray(entry) &&\n                    entryType === 'object' &&\n                    entry.selector &&\n                    (!entry.property ||\n                        supportedProperty.indexOf(entry.property) > -1)\n                ) {\n                    corrections.push({\n                        ...defaults,\n                        ...entry\n                    });\n                }\n            }\n        });\n    };\n\n    const getCorrections = (inverted = false) => {\n        let css = '';\n\n        if (corrections.length) {\n            corrections.forEach(entry => {\n                const gap =\n                    state.scrollbars[\n                        entry.property.indexOf('right') > -1 ? 'y' : 'x'\n                    ];\n\n                if (gap > 0) {\n                    let factor = 1;\n\n                    if (inverted) {\n                        factor = entry.inverted ? -1 : 0;\n                    }\n\n                    css += `\n                ${entry.selector} {\n                    ${entry.property}: ${gap * factor}px${\n                    settings.important ? '!important' : ''\n                };\n                }`;\n                }\n            });\n        }\n\n        return css;\n    };\n\n    const lock = () => {\n        if (!status) {\n            // snapshot of current state\n            setState();\n\n            //\n            if (settings.incubator) {\n                incubator.innerHTML = '';\n                while (body.firstChild) {\n                    incubator.append(body.firstChild);\n                }\n                body.append(incubator);\n            }\n\n            const imp = settings.important ? '!important' : '';\n\n            setStyle(`\n            html,\n            body\n            ${settings.incubator ? ', #' + incubator.id : ''} {\n                margin: 0${imp};\n                padding: 0${imp};\n                min-width: auto${imp};\n                min-height: auto${imp};\n                max-width: none${imp};\n                max-height: none${imp};\n            }\n\n            html\n            ${settings.incubator ? ', body' : ''} {\n                width: ${state.html.width}px${imp};\n                height: ${state.html.height}px${imp};\n            }\n\n            html {\n                position: fixed${imp};\n                top: ${state.scroll.top * -1}px${imp};\n                left: ${state.scroll.left * -1}px${imp};\n            }\n\n            html,\n            body {              \n                overflow: ${\n                    settings.overflowHidden ? 'hidden' : 'visible'\n                }${imp};\n            }\n\n            ${settings.incubator ? '#' + incubator.id : 'body'} {\n                width: ${state.body.width}px${imp};\n                height: ${state.body.height}px${imp};\n                ${settings.incubator ? `position: relative${imp};` : ''}\n            }\n            \n            ${getCorrections()}`);\n\n            setStatus(true);\n        }\n    };\n\n    const unlock = () => {\n        if (status) {\n            setStyle(getCorrections(true));\n\n            if (settings.incubator) {\n                while (incubator.firstChild) {\n                    incubator.before(incubator.firstChild);\n                }\n                incubator.remove();\n            }\n\n            window.scrollTo(state.scroll);\n\n            setStatus(false);\n        }\n    };\n\n    const toggle = () => (!status ? lock() : unlock());\n\n    let timer = null;\n\n    window.addEventListener('resize', () => {\n        clearTimeout(timer);\n        \n        timer = setTimeout(() => {\n            if (status) {\n                unlock();\n\n                lock();\n            }\n        }, 500);\n    });\n\n    var bodyScroll = {\n        lock: lock,\n        unlock: unlock,\n        toggle: toggle,\n        setCorrections: setCorrections,\n        isLocked: () => status,\n        setOptions: setOptions\n    };\n\n    return bodyScroll;\n\n})));\n"],"file":"body-scroll.min.js"}