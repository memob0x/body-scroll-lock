{"version":3,"sources":["body-scroll.mjs"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","global","factory","exports","module","define","amd","self","bodyScroll","$head","document","head","$html","documentElement","$body","body","$style","createElement","CssVars","getClientWidth","locked","style","width","concat","clientWidth","overflow","isStyleElementInHead","parentNode","setCssVars","rule","arguments","length","undefined","index","appendChild","sheet","cssRules","deleteRule","insertRule","insertIndexedRule","window","scrollY","scroll","x","y","saveScrollPosition","scrollX","isLocked","disabled","update","_unlock","_lock","classList","add","lock","dispatchEvent","CustomEvent","addEventListener","remove","scrollTo","unlock","removeEventListener","toggle"],"mappings":"AAAA,aAEA,SAASA,QAAQC,GAAwT,OAAtOD,QAArD,mBAAXE,QAAoD,iBAApBA,OAAOC,SAAmC,SAAiBF,GAAO,cAAcA,GAA2B,SAAiBA,GAAO,OAAOA,GAAyB,mBAAXC,QAAyBD,EAAIG,cAAgBF,QAAUD,IAAQC,OAAOG,UAAY,gBAAkBJ,IAAyBA,IAExV,SAAWK,EAAQC,GACqD,YAAlD,oBAAZC,QAA0B,YAAcR,QAAQQ,WAA4C,oBAAXC,OAAyBA,OAAOD,QAAUD,IAA8B,mBAAXG,QAAyBA,OAAOC,IAAMD,OAAO,aAAcH,IAAYD,EAASA,GAAUM,MAAaC,WAAaN,IAD5Q,MAEG,EAAQ,WAGT,IAAIO,EAAQC,SAASC,KACjBC,EAAQF,SAASG,gBACjBC,EAAQJ,SAASK,KACjBC,EAASN,SAASO,cAAc,SAChCC,EACQ,yBADRA,EAEe,gCAGfC,EAAiB,SAAwBC,GAG3C,OAFAN,EAAMO,MAAMC,MAAQF,EAAS,GAAGG,OAAOX,EAAMY,YAAa,MAAQ,GAClEZ,EAAMS,MAAMI,SAAWL,EAAS,SAAW,GACpCR,EAAMY,aAGXE,EAAuB,WACzB,OAAOV,EAAOW,aAAelB,GAkB3BmB,EAAa,YAfO,WACtB,IAAIC,EAAOC,UAAUC,OAAS,QAAsBC,IAAjBF,UAAU,GAAmBA,UAAU,GAAK,GAC3EG,EAAQH,UAAUC,OAAS,QAAsBC,IAAjBF,UAAU,GAAmBA,UAAU,GAAK,EAE3EJ,KACHjB,EAAMyB,YAAYlB,GAGhBA,EAAOmB,MAAMC,SAASH,IACxBjB,EAAOmB,MAAME,WAAWJ,GAG1BjB,EAAOmB,MAAMG,WAAWT,EAAMI,GAI9BM,CAAkB,wBAAwBhB,OAAOL,EAAkB,MAAMK,OAAOiB,OAAOC,QAAS,qBAAqBlB,OAAOL,EAAyB,MAAMK,OAAOJ,GAAe,GAAQA,GAAe,GAAQ,oBAG9MuB,EAAS,CACXC,EAAG,EACHC,EAAG,GAUDC,EAAqB,WACvB,OAAOH,EAPA,CACLC,EAAGH,OAAOM,QACVF,EAAGJ,OAAOC,UAcVM,EAAW,WACb,OAAOrB,MAA2BV,EAAOgC,UAGvCC,EAAS,WACNF,MAILG,IAEAC,MAGEA,EAAQ,WACVN,IACA7B,EAAOgC,UAAW,EAClBpB,IACAhB,EAAMwC,UAAUC,IApBY,uBAuB1BC,EAAO,WACTH,IAEAX,OAAOe,cAAc,IAAIC,YAAY,mBACrChB,OAAOiB,iBAAiB,SAAUR,IAGhCC,EAAU,WACZtC,EAAMwC,UAAUM,OA/BY,sBAHrBlB,OAAOmB,SAASjB,EAAOC,EAAGD,EAAOE,GAoCxC5B,EAAOgC,UAAW,GAGhBY,EAAS,WACXV,IAEAV,OAAOe,cAAc,IAAIC,YAAY,qBACrChB,OAAOqB,oBAAoB,SAAUZ,IAYvC,MATiB,CACfK,KAAMA,EACNM,OAAQA,EACRb,SAAUA,EACVe,OAAQ,WACN,OAAOf,IAAaa,IAAWN,KAEjCL,OAAQA","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define('bodyScroll', factory) :\n    (global = global || self, global.bodyScroll = factory());\n}(this, (function () { 'use strict';\n\n    const $head = document.head;\n    const $html = document.documentElement;\n    const $body = document.body;\n    const $style = document.createElement(\"style\");\n\n    const CssVars = {\n        SCROLL_Y: \"--body-scroll-scroll-y\",\n        SCROLLBAR_WIDTH: \"--body-scroll-scrollbar-width\"\n    };\n\n    /**\n     *\n     * @param state\n     */\n    const getClientWidth = locked => {\n        $body.style.width = locked ? `${$html.clientWidth}px` : \"\";\n        $html.style.overflow = locked ? \"hidden\" : \"\";\n\n        return $html.clientWidth;\n    };\n\n    /**\n     * Checks if the style element is in the tag head or not\n     * @returns {boolean} true if present\n     */\n    const isStyleElementInHead = () => $style.parentNode === $head;\n\n    /**\n     * Inserts a rule with the CSSStyleSheet interface\n     * @param {string} rule The CSS rule to add\n     * @param {number} index The index of the CSS rule in the CSSRulesList\n     */\n    const insertIndexedRule = (rule = \"\", index = 0) => {\n        if (!isStyleElementInHead()) {\n            $head.appendChild($style);\n        }\n\n        if ($style.sheet.cssRules[index]) {\n            $style.sheet.deleteRule(index);\n        }\n\n        $style.sheet.insertRule(rule, index);\n    };\n\n    /**\n     *\n     */\n    const setCssVars = () => {\n        insertIndexedRule(\n            `:root {\n            ${CssVars.SCROLL_Y}: ${window.scrollY}px;\n            ${CssVars.SCROLLBAR_WIDTH}: ${getClientWidth(true) -\n            getClientWidth(false)}px;\n        }`\n        );\n    };\n\n    /**\n     *\n     */\n    let scroll = {\n        x: 0,\n        y: 0\n    };\n\n    /**\n     *\n     */\n    const getScrollPosition = () => {\n        return {\n            x: window.scrollX,\n            y: window.scrollY\n        };\n    };\n\n    /**\n     *\n     */\n    const saveScrollPosition = () => (scroll = getScrollPosition());\n\n    /**\n     *\n     */\n    const restoreScrollPosition = () => window.scrollTo(scroll.x, scroll.y);\n\n    const LOCKED_STATUS_CSS_CLASS = \"body-scroll-locked\";\n\n    /**\n     *\n     */\n    /**\n     * Returns whether the body scroll is locked or not\n     * @returns {boolean} The body scroll lock state\n     */\n    const isLocked = () => isStyleElementInHead() && !$style.disabled;\n\n    /**\n     *\n     */\n    const update = () => {\n        if (!isLocked()) {\n            return;\n        }\n\n        _unlock();\n\n        _lock();\n    };\n\n    /**\n     *\n     */\n    const _lock = () => {\n        saveScrollPosition();\n        $style.disabled = false;\n        setCssVars();\n        $html.classList.add(LOCKED_STATUS_CSS_CLASS);\n    };\n\n    /**\n     *\n     */\n    const lock = () => {\n        _lock();\n\n        window.dispatchEvent(new CustomEvent(\"bodyScrollLock\"));\n\n        window.addEventListener(\"resize\", update);\n    };\n\n    /**\n     *\n     */\n    const _unlock = () => {\n        $html.classList.remove(LOCKED_STATUS_CSS_CLASS);\n        restoreScrollPosition();\n        $style.disabled = true;\n    };\n\n    /**\n     *\n     */\n    const unlock = () => {\n        _unlock();\n\n        window.dispatchEvent(new CustomEvent(\"bodyScrollUnlock\"));\n\n        window.removeEventListener(\"resize\", update);\n    };\n\n    var bodyScroll = {\n        lock: lock,\n        unlock: unlock,\n        isLocked: isLocked,\n        toggle: () => (isLocked() ? unlock() : lock()),\n        update: update\n    };\n\n    return bodyScroll;\n\n})));\n"],"file":"body-scroll.min.js"}