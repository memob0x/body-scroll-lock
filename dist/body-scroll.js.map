{"version":3,"sources":["body-scroll.mjs"],"names":["global","factory","exports","module","define","amd","self","bodyScroll","$head","document","head","$html","documentElement","$body","body","$style","createElement","CssVars","SCROLL_Y","SCROLLBAR_WIDTH","getClientWidth","locked","style","width","clientWidth","overflow","isStyleElementInHead","parentNode","insertIndexedRule","rule","index","appendChild","sheet","cssRules","deleteRule","insertRule","setCssVars","window","scrollY","scroll","x","y","getScrollPosition","scrollX","saveScrollPosition","restoreScrollPosition","scrollTo","LOCKED_STATUS_CSS_CLASS","isLocked","disabled","update","_unlock","_lock","classList","add","lock","dispatchEvent","CustomEvent","addEventListener","remove","unlock","removeEventListener","toggle"],"mappings":"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","file":"body-scroll.js","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define('bodyScroll', factory) :\n    (global = global || self, global.bodyScroll = factory());\n}(this, (function () { 'use strict';\n\n    const $head = document.head;\n    const $html = document.documentElement;\n    const $body = document.body;\n    const $style = document.createElement(\"style\");\n\n    const CssVars = {\n        SCROLL_Y: \"--body-scroll-scroll-y\",\n        SCROLLBAR_WIDTH: \"--body-scroll-scrollbar-width\"\n    };\n\n    /**\n     *\n     * @param state\n     */\n    const getClientWidth = locked => {\n        $body.style.width = locked ? `${$html.clientWidth}px` : \"\";\n        $html.style.overflow = locked ? \"hidden\" : \"\";\n\n        return $html.clientWidth;\n    };\n\n    /**\n     * Checks if the style element is in the tag head or not\n     * @returns {boolean} true if present\n     */\n    const isStyleElementInHead = () => $style.parentNode === $head;\n\n    /**\n     * Inserts a rule with the CSSStyleSheet interface\n     * @param {string} rule The CSS rule to add\n     * @param {number} index The index of the CSS rule in the CSSRulesList\n     */\n    const insertIndexedRule = (rule = \"\", index = 0) => {\n        if (!isStyleElementInHead()) {\n            $head.appendChild($style);\n        }\n\n        if ($style.sheet.cssRules[index]) {\n            $style.sheet.deleteRule(index);\n        }\n\n        $style.sheet.insertRule(rule, index);\n    };\n\n    /**\n     *\n     */\n    const setCssVars = () => {\n        insertIndexedRule(\n            `:root {\n            ${CssVars.SCROLL_Y}: ${window.scrollY}px;\n            ${CssVars.SCROLLBAR_WIDTH}: ${getClientWidth(true) -\n            getClientWidth(false)}px;\n        }`\n        );\n    };\n\n    /**\n     *\n     */\n    let scroll = {\n        x: 0,\n        y: 0\n    };\n\n    /**\n     *\n     */\n    const getScrollPosition = () => {\n        return {\n            x: window.scrollX,\n            y: window.scrollY\n        };\n    };\n\n    /**\n     *\n     */\n    const saveScrollPosition = () => (scroll = getScrollPosition());\n\n    /**\n     *\n     */\n    const restoreScrollPosition = () => window.scrollTo(scroll.x, scroll.y);\n\n    const LOCKED_STATUS_CSS_CLASS = \"body-scroll-locked\";\n\n    /**\n     *\n     */\n    /**\n     * Returns whether the body scroll is locked or not\n     * @returns {boolean} The body scroll lock state\n     */\n    const isLocked = () => isStyleElementInHead() && !$style.disabled;\n\n    /**\n     *\n     */\n    const update = () => {\n        if (!isLocked()) {\n            return;\n        }\n\n        _unlock();\n\n        _lock();\n    };\n\n    /**\n     *\n     */\n    const _lock = () => {\n        saveScrollPosition();\n        $style.disabled = false;\n        setCssVars();\n        $html.classList.add(LOCKED_STATUS_CSS_CLASS);\n    };\n\n    /**\n     *\n     */\n    const lock = () => {\n        _lock();\n\n        window.dispatchEvent(new CustomEvent(\"bodyScrollLock\"));\n\n        window.addEventListener(\"resize\", update);\n    };\n\n    /**\n     *\n     */\n    const _unlock = () => {\n        $html.classList.remove(LOCKED_STATUS_CSS_CLASS);\n        restoreScrollPosition();\n        $style.disabled = true;\n    };\n\n    /**\n     *\n     */\n    const unlock = () => {\n        _unlock();\n\n        window.dispatchEvent(new CustomEvent(\"bodyScrollUnlock\"));\n\n        window.removeEventListener(\"resize\", update);\n    };\n\n    var bodyScroll = {\n        lock: lock,\n        unlock: unlock,\n        isLocked: isLocked,\n        toggle: () => (isLocked() ? unlock() : lock()),\n        update: update\n    };\n\n    return bodyScroll;\n\n})));\n"]}