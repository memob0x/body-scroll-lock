{"version":3,"file":"body-scroll.js","sources":["src/body-scroll.constants.mjs","src/body-scroll.scroll.mjs","src/body-scroll.api.mjs"],"sourcesContent":["export const NAMESPACE = \"body-scroll-lock\";\n\nexport const $head = document.head;\nexport const $html = document.documentElement;\nexport const $body = document.body;\n\nexport const $style =\n    $head.querySelector(`#${NAMESPACE}`) ||\n    (() => {\n        const $style = document.createElement(\"style\");\n\n        $style.id = NAMESPACE;\n\n        return $style;\n    })();\n","/**\n *\n */\nlet _x = 0;\nlet _y = 0;\n\n/**\n *\n */\nexport const save = () => {\n    _x = window.pageXOffset;\n    _y = window.pageYOffset;\n};\n\n/**\n *\n */\nexport const restore = () => window.scrollTo(_x, _y);\n","import {\n    NAMESPACE,\n    $head,\n    $html,\n    $body,\n    $style\n} from \"./body-scroll.constants.mjs\";\n\nimport * as Scroll from \"./body-scroll.scroll.mjs\";\n\n/**\n * Checks if the style element is in the tag head or not\n * @returns {boolean} true if present\n */\nconst _styleExists = () => $style.parentNode === $head;\n\n/**\n *\n * @param {boolean} locked\n * @returns {number}\n */\nconst _getClientWidth = locked => {\n    $body.style.width = locked ? `${$html.clientWidth}px` : \"\";\n    $html.style.overflow = locked ? \"hidden\" : \"\";\n\n    return $html.clientWidth;\n};\n\n/**\n *\n * @param {string} eventName\n */\nconst _dispatch = eventName =>\n    typeof window.CustomEvent === \"function\"\n        ? window.dispatchEvent(new CustomEvent(eventName))\n        : () => {};\n\n/**\n *\n */\nconst _lock = () => {\n    Scroll.save();\n    $style.disabled = false;\n\n    const index = 0;\n\n    if (!_styleExists()) {\n        $head.appendChild($style);\n    }\n\n    if ($style.sheet.cssRules[index]) {\n        $style.sheet.deleteRule(index);\n    }\n\n    $style.sheet.insertRule(\n        `:root {\n            --${NAMESPACE}-top-rect: ${window.scrollY * -1}px!important;\n            --${NAMESPACE}-scrollbar-gap: ${_getClientWidth(true) -\n            _getClientWidth(false)}px!important;\n        }`,\n        index\n    );\n\n    $html.classList.add(NAMESPACE);\n};\n\n/**\n *\n */\nconst _unlock = () => {\n    $html.classList.remove(NAMESPACE);\n\n    Scroll.restore();\n\n    $style.disabled = true;\n};\n\n/**\n *\n */\nconst _resize = mode => window[`${mode}EventListener`](\"resize\", update);\n\n/**\n *\n */\n/**\n * Returns whether the body scroll is locked or not\n * @returns {boolean} The body scroll lock state\n */\nexport const isLocked = () =>\n    _styleExists() && !$style.disabled && $html.classList.contains(NAMESPACE);\n\n/**\n *\n */\nexport const update = () => {\n    if (!isLocked()) {\n        return;\n    }\n\n    _unlock();\n\n    _lock();\n};\n\n/**\n *\n */\nexport const lock = () => {\n    _lock();\n\n    _dispatch(\"bodyscrolllock\");\n\n    _resize(\"add\");\n};\n\n/**\n *\n */\nexport const unlock = () => {\n    _unlock();\n\n    _dispatch(\"bodyscrollunlock\");\n\n    _resize(\"remove\");\n};\n"],"names":["Scroll.save","Scroll.restore"],"mappings":";;;;;;IAAO,MAAM,SAAS,GAAG,kBAAkB,CAAC;AAC5C;IACO,MAAM,KAAK,GAAG,QAAQ,CAAC,IAAI,CAAC;IAC5B,MAAM,KAAK,GAAG,QAAQ,CAAC,eAAe,CAAC;IACvC,MAAM,KAAK,GAAG,QAAQ,CAAC,IAAI,CAAC;AACnC;IACO,MAAM,MAAM;IACnB,IAAI,KAAK,CAAC,aAAa,CAAC,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC,CAAC;IACxC,IAAI,CAAC,MAAM;IACX,QAAQ,MAAM,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;AACvD;IACA,QAAQ,MAAM,CAAC,EAAE,GAAG,SAAS,CAAC;AAC9B;IACA,QAAQ,OAAO,MAAM,CAAC;IACtB,KAAK,GAAG;;ICdR;IACA;IACA;IACA,IAAI,EAAE,GAAG,CAAC,CAAC;IACX,IAAI,EAAE,GAAG,CAAC,CAAC;AACX;IACA;IACA;IACA;AACA,IAAO,MAAM,IAAI,GAAG,MAAM;IAC1B,IAAI,EAAE,GAAG,MAAM,CAAC,WAAW,CAAC;IAC5B,IAAI,EAAE,GAAG,MAAM,CAAC,WAAW,CAAC;IAC5B,CAAC,CAAC;AACF;IACA;IACA;IACA;AACA,IAAO,MAAM,OAAO,GAAG,MAAM,MAAM,CAAC,QAAQ,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;;ICPrD;IACA;IACA;IACA;IACA,MAAM,YAAY,GAAG,MAAM,MAAM,CAAC,UAAU,KAAK,KAAK,CAAC;AACvD;IACA;IACA;IACA;IACA;IACA;IACA,MAAM,eAAe,GAAG,MAAM,IAAI;IAClC,IAAI,KAAK,CAAC,KAAK,CAAC,KAAK,GAAG,MAAM,GAAG,CAAC,EAAE,KAAK,CAAC,WAAW,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC;IAC/D,IAAI,KAAK,CAAC,KAAK,CAAC,QAAQ,GAAG,MAAM,GAAG,QAAQ,GAAG,EAAE,CAAC;AAClD;IACA,IAAI,OAAO,KAAK,CAAC,WAAW,CAAC;IAC7B,CAAC,CAAC;AACF;IACA;IACA;IACA;IACA;IACA,MAAM,SAAS,GAAG,SAAS;IAC3B,IAAI,OAAO,MAAM,CAAC,WAAW,KAAK,UAAU;IAC5C,UAAU,MAAM,CAAC,aAAa,CAAC,IAAI,WAAW,CAAC,SAAS,CAAC,CAAC;IAC1D,UAAU,MAAM,EAAE,CAAC;AACnB;IACA;IACA;IACA;IACA,MAAM,KAAK,GAAG,MAAM;IACpB,IAAIA,IAAW,EAAE,CAAC;IAClB,IAAI,MAAM,CAAC,QAAQ,GAAG,KAAK,CAAC;AAC5B;IACA,IAAI,MAAM,KAAK,GAAG,CAAC,CAAC;AACpB;IACA,IAAI,IAAI,CAAC,YAAY,EAAE,EAAE;IACzB,QAAQ,KAAK,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;IAClC,KAAK;AACL;IACA,IAAI,IAAI,MAAM,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE;IACtC,QAAQ,MAAM,CAAC,KAAK,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;IACvC,KAAK;AACL;IACA,IAAI,MAAM,CAAC,KAAK,CAAC,UAAU;IAC3B,QAAQ,CAAC;AACT,cAAc,EAAE,SAAS,CAAC,WAAW,EAAE,MAAM,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC;AAC3D,cAAc,EAAE,SAAS,CAAC,gBAAgB,EAAE,eAAe,CAAC,IAAI,CAAC;AACjE,YAAY,eAAe,CAAC,KAAK,CAAC,CAAC;AACnC,SAAS,CAAC;IACV,QAAQ,KAAK;IACb,KAAK,CAAC;AACN;IACA,IAAI,KAAK,CAAC,SAAS,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;IACnC,CAAC,CAAC;AACF;IACA;IACA;IACA;IACA,MAAM,OAAO,GAAG,MAAM;IACtB,IAAI,KAAK,CAAC,SAAS,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;AACtC;IACA,IAAIC,OAAc,EAAE,CAAC;AACrB;IACA,IAAI,MAAM,CAAC,QAAQ,GAAG,IAAI,CAAC;IAC3B,CAAC,CAAC;AACF;IACA;IACA;IACA;IACA,MAAM,OAAO,GAAG,IAAI,IAAI,MAAM,CAAC,CAAC,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;AACzE;IACA;IACA;IACA;IACA;IACA;IACA;IACA;AACA,IAAO,MAAM,QAAQ,GAAG;IACxB,IAAI,YAAY,EAAE,IAAI,CAAC,MAAM,CAAC,QAAQ,IAAI,KAAK,CAAC,SAAS,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;AAC9E;IACA;IACA;IACA;AACA,IAAO,MAAM,MAAM,GAAG,MAAM;IAC5B,IAAI,IAAI,CAAC,QAAQ,EAAE,EAAE;IACrB,QAAQ,OAAO;IACf,KAAK;AACL;IACA,IAAI,OAAO,EAAE,CAAC;AACd;IACA,IAAI,KAAK,EAAE,CAAC;IACZ,CAAC,CAAC;AACF;IACA;IACA;IACA;AACA,IAAO,MAAM,IAAI,GAAG,MAAM;IAC1B,IAAI,KAAK,EAAE,CAAC;AACZ;IACA,IAAI,SAAS,CAAC,gBAAgB,CAAC,CAAC;AAChC;IACA,IAAI,OAAO,CAAC,KAAK,CAAC,CAAC;IACnB,CAAC,CAAC;AACF;IACA;IACA;IACA;AACA,IAAO,MAAM,MAAM,GAAG,MAAM;IAC5B,IAAI,OAAO,EAAE,CAAC;AACd;IACA,IAAI,SAAS,CAAC,kBAAkB,CAAC,CAAC;AAClC;IACA,IAAI,OAAO,CAAC,QAAQ,CAAC,CAAC;IACtB,CAAC,CAAC;;;;;;;;;;;;;;;;"}