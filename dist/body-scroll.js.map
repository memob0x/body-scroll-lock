{"version":3,"sources":["body-scroll.mjs"],"names":["global","factory","exports","module","define","amd","self","bodyScroll","$head","document","head","$stylerBase","createElement","$stylerResizable","isLegacyIOS","test","navigator","platform","isMultiTouchMac","maxTouchPoints","isAppleTouchDevice","IMPORTANT_STATEMENT","status","scroll","x","y","scrollBarWidth","clientWidth","getBaseRules","output","getResizableRules","printRules","$actor","rules","innerHTML","parentNode","append","printBaseRules","printResizableRules","isLocked","lock","window","scrollX","scrollY","_clientWidth","documentElement","body","style","width","overflow","unlock","resize","addEventListener","toggle"],"mappings":"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","file":"body-scroll.js","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define('bodyScroll', factory) :\n    (global = global || self, global.bodyScroll = factory());\n}(this, function () { 'use strict';\n\n    const $head = document.head;\n    const $stylerBase = document.createElement('style');\n    const $stylerResizable = document.createElement('style');\n\n    const isLegacyIOS = /iPad|iPhone|iPod/.test(navigator.platform);\n    const isMultiTouchMac =\n        navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1; // aka iOS >= 13\n    const isAppleTouchDevice = isLegacyIOS && isMultiTouchMac;\n\n    const IMPORTANT_STATEMENT = '!important';\n\n    let status = false;\n    let scroll = {\n        x: 0,\n        y: 0\n    };\n    let scrollBarWidth = 0;\n    let clientWidth = 0;\n\n    const getBaseRules = () => {\n        let output = '';\n        output = ' html,';\n        output += 'body {';\n        output += 'height: auto' + IMPORTANT_STATEMENT + ';';\n        output += 'margin: 0' + IMPORTANT_STATEMENT + ';';\n        output +=\n            'padding: 0 ' + scrollBarWidth + 'px 0 0' + IMPORTANT_STATEMENT + ';';\n        output += '}';\n\n        if (isAppleTouchDevice) {\n            output += 'html {';\n            output += 'position: fixed' + IMPORTANT_STATEMENT + ';';\n            output += 'top: ' + -1 * scroll.y + 'px' + IMPORTANT_STATEMENT + ';';\n            output += 'left: ' + -1 * scroll.x + 'px' + IMPORTANT_STATEMENT + ';';\n            output += 'overflow: visible' + IMPORTANT_STATEMENT + ';';\n            output += '}';\n        } else {\n            output += 'body {';\n            output += 'overflow: hidden' + IMPORTANT_STATEMENT + ';';\n            output += '}';\n        }\n\n        return output;\n    };\n\n    const getResizableRules = () => {\n        let output = '';\n        output = ' html,';\n        output += 'body {';\n        output += 'width: ' + clientWidth + 'px' + IMPORTANT_STATEMENT + ';';\n        output += '}';\n        return output;\n    };\n\n    const printRules = ($actor, rules) => {\n        $actor.innerHTML = rules;\n\n        if ($actor.parentNode !== $head) {\n            $head.append($actor);\n        }\n    };\n\n    const printBaseRules = () => printRules($stylerBase, getBaseRules());\n\n    const printResizableRules = () =>\n        printRules($stylerResizable, getResizableRules());\n\n    const isLocked = () => status;\n\n    const lock = () => {\n        if (status) {\n            return false;\n        }\n\n        status = true;\n\n        scroll = {\n            x: window.scrollX,\n            y: window.scrollY\n        };\n\n        const _clientWidth = document.documentElement.clientWidth;\n        document.body.style.width = document.body.clientWidth + 'px';\n        document.documentElement.style.overflow = 'hidden';\n        clientWidth = document.documentElement.clientWidth;\n        scrollBarWidth = clientWidth - _clientWidth;\n        document.body.style.width = '';\n        document.documentElement.style.overflow = '';\n\n        printBaseRules();\n\n        printResizableRules();\n\n        if (isAppleTouchDevice) {\n            window.scroll(0, 0);\n        }\n\n        return true;\n    };\n\n    const unlock = () => {\n        if (!status) {\n            return false;\n        }\n\n        status = false;\n\n        $stylerBase.innerHTML = '';\n        $stylerResizable.innerHTML = '';\n\n        if (isAppleTouchDevice) {\n            window.scroll(scroll.x, scroll.y);\n        }\n\n        return true;\n    };\n\n    const resize = () => {\n        if (!status) {\n            return;\n        }\n\n        clientWidth = document.documentElement.clientWidth;\n\n        printResizableRules();\n    };\n\n    document.addEventListener('resize', resize);\n\n    var bodyScroll = {\n        lock: lock,\n        unlock: unlock,\n        toggle: () => (!isLocked() ? lock() : unlock()),\n        isLocked: isLocked\n    };\n\n    return bodyScroll;\n\n}));\n"]}