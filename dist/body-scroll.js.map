{"version":3,"sources":["body-scroll.mjs"],"names":["global","factory","exports","module","define","amd","self","bodyScroll","$head","document","head","$stylerBase","createElement","$stylerResizable","isLegacyIOS","test","window","navigator","userAgent","isMultiTouchMacAkaIOS13","platform","maxTouchPoints","isAppleTouchDevice","IMPORTANT_STATEMENT","status","scroll","x","y","scrollbarWidth","clientWidth","getBaseRules","output","getResizableRules","printRules","$actor","rules","innerHTML","parentNode","append","printBaseRules","printResizableRules","isLocked","lock","scrollX","scrollY","_clientWidth","documentElement","body","style","width","overflow","dispatchEvent","CustomEvent","unlock","resize","addEventListener","toggle","update"],"mappings":"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","file":"body-scroll.js","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define('bodyScroll', factory) :\n    (global = global || self, global.bodyScroll = factory());\n}(this, function () { 'use strict';\n\n    const $head = document.head;\n    const $stylerBase = document.createElement('style');\n    const $stylerResizable = document.createElement('style');\n\n    const isLegacyIOS = /iPad|iPhone|iPod/.test(window.navigator.userAgent);\n    const isMultiTouchMacAkaIOS13 =\n        window.navigator.platform === 'MacIntel' &&\n        window.navigator.maxTouchPoints > 1;\n    const isAppleTouchDevice = isLegacyIOS || isMultiTouchMacAkaIOS13;\n\n    const IMPORTANT_STATEMENT = '!important';\n\n    let status = false;\n    let scroll = {\n        x: 0,\n        y: 0\n    };\n    let scrollbarWidth = 0;\n    let clientWidth = 0;\n\n    const getBaseRules = () => {\n        let output = '';\n        output = ' html,';\n        output += 'body {';\n        output += 'height: auto' + IMPORTANT_STATEMENT + ';';\n        output += 'margin: 0' + IMPORTANT_STATEMENT + ';';\n        output +=\n            'padding: 0 ' + scrollbarWidth + 'px 0 0' + IMPORTANT_STATEMENT + ';';\n        output += '}';\n\n        if (isAppleTouchDevice) {\n            output += 'html {';\n            output += 'position: fixed' + IMPORTANT_STATEMENT + ';';\n            output += 'top: ' + -1 * scroll.y + 'px' + IMPORTANT_STATEMENT + ';';\n            output += 'left: ' + -1 * scroll.x + 'px' + IMPORTANT_STATEMENT + ';';\n            output += 'overflow: visible' + IMPORTANT_STATEMENT + ';';\n            output += '}';\n        } else {\n            output += 'body {';\n            output += 'overflow: hidden' + IMPORTANT_STATEMENT + ';';\n            output += '}';\n        }\n\n        return output;\n    };\n\n    const getResizableRules = () => {\n        let output = '';\n        output = ' html,';\n        output += 'body {';\n        output += 'width: ' + clientWidth + 'px' + IMPORTANT_STATEMENT + ';';\n        output += '}';\n        return output;\n    };\n\n    const printRules = ($actor, rules) => {\n        $actor.innerHTML = rules;\n\n        if ($actor.parentNode !== $head) {\n            $head.append($actor);\n        }\n    };\n\n    const printBaseRules = () => printRules($stylerBase, getBaseRules());\n\n    const printResizableRules = () =>\n        printRules($stylerResizable, getResizableRules());\n\n    const isLocked = () => status;\n\n    const lock = () => {\n        if (status) {\n            return false;\n        }\n\n        status = true;\n\n        scroll = {\n            x: window.scrollX,\n            y: window.scrollY\n        };\n\n        const _clientWidth = document.documentElement.clientWidth;\n        document.body.style.width = document.body.clientWidth + 'px';\n        document.documentElement.style.overflow = 'hidden';\n        clientWidth = document.documentElement.clientWidth;\n        scrollbarWidth = clientWidth - _clientWidth;\n        document.body.style.width = '';\n        document.documentElement.style.overflow = '';\n\n        printBaseRules();\n\n        printResizableRules();\n\n        if (isAppleTouchDevice) {\n            window.scroll(0, 0);\n        }\n\n        window.dispatchEvent(\n            new CustomEvent('bodyScrollLock', {\n                clientWidth: clientWidth,\n                scrollbarWidth: scrollbarWidth\n            })\n        );\n\n        return true;\n    };\n\n    const unlock = () => {\n        if (!status) {\n            return false;\n        }\n\n        status = false;\n\n        $stylerBase.innerHTML = '';\n        $stylerResizable.innerHTML = '';\n\n        if (isAppleTouchDevice) {\n            window.scroll(scroll.x, scroll.y);\n        }\n\n        window.dispatchEvent(\n            new CustomEvent('bodyScrollUnlock', {\n                clientWidth: clientWidth,\n                scrollbarWidth: scrollbarWidth\n            })\n        );\n\n        return true;\n    };\n\n    const resize = () => {\n        if (!status) {\n            return;\n        }\n\n        clientWidth = document.documentElement.clientWidth;\n\n        printResizableRules();\n    };\n\n    document.addEventListener('resize', resize);\n\n    var bodyScroll = {\n        lock: lock,\n        unlock: unlock,\n        toggle: () => (!isLocked() ? lock() : unlock()),\n        isLocked: isLocked,\n        update: resize\n    };\n\n    return bodyScroll;\n\n}));\n"]}