{"version":3,"sources":["body-scroll.mjs"],"names":["global","factory","exports","module","define","amd","self","bodyScroll","$head","document","head","$html","documentElement","$body","body","supportsCustomEvents","window","CustomEvent","getOrCreateUniqueStyleElement","id","querySelector","$style","createElement","isStyleElementInHead","parentNode","insertIndexedRuleInStyleElement","rule","index","appendChild","sheet","cssRules","deleteRule","insertRule","$locker","CssVars","SCROLL_Y","SCROLLBAR_WIDTH","getClientWidth","locked","style","width","clientWidth","overflow","setLockerCssVars","scrollY","scroll","x","y","getScrollPosition","Object","scrollX","saveScrollPosition","restoreScrollPosition","scrollTo","LOCKED_STATUS_CSS_CLASS","isLocked","disabled","classList","contains","update","_unlock","_lock","add","lock","dispatchEvent","addEventListener","remove","unlock","removeEventListener","toggle"],"mappings":"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","file":"body-scroll.js","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define('bodyScroll', factory) :\n    (global = global || self, global.bodyScroll = factory());\n}(this, (function () { 'use strict';\n\n    const $head = document.head;\n    const $html = document.documentElement;\n    const $body = document.body;\n\n    const supportsCustomEvents = typeof window.CustomEvent === \"function\";\n\n    /**\n     *\n     * @param {string} id\n     * @returns {HTMLStyleElement}\n     */\n    const getOrCreateUniqueStyleElement = id => {\n        return (\n            $head.querySelector(`#${id}`) ||\n            (() => {\n                const $style = document.createElement(\"style\");\n                $style.id = id;\n                return $style;\n            })()\n        );\n    };\n\n    /**\n     * Checks if the style element is in the tag head or not\n     * @param {HTMLLinkElement} $style\n     * @returns {boolean} true if present\n     */\n    const isStyleElementInHead = $style => $style.parentNode === $head;\n\n    /**\n     * Inserts a rule with the CSSStyleSheet interface\n     * @param {HTMLLinkElement} $style\n     * @param {string} rule The CSS rule to add\n     * @param {number} index The index of the CSS rule in the CSSRulesList\n     */\n    const insertIndexedRuleInStyleElement = (\n        $style,\n        rule = \"\",\n        index = 0\n    ) => {\n        if (!isStyleElementInHead($style)) {\n            $head.appendChild($style);\n        }\n\n        if ($style.sheet.cssRules[index]) {\n            $style.sheet.deleteRule(index);\n        }\n\n        $style.sheet.insertRule(rule, index);\n\n        return $style;\n    };\n\n    /**\n     *\n     */\n    const $locker = getOrCreateUniqueStyleElement(\"body-scroll-locker\");\n\n    /**\n     *\n     */\n    const CssVars = {\n        SCROLL_Y: \"--body-scroll-scroll-y\",\n        SCROLLBAR_WIDTH: \"--body-scroll-scrollbar-width\"\n    };\n\n    /**\n     *\n     * @param locked\n     */\n    const getClientWidth = locked => {\n        $body.style.width = locked ? `${$html.clientWidth}px` : \"\";\n        $html.style.overflow = locked ? \"hidden\" : \"\";\n\n        return $html.clientWidth;\n    };\n\n    /**\n     *\n     */\n    const setLockerCssVars = () => {\n        insertIndexedRuleInStyleElement(\n            $locker,\n            `:root {\n            ${CssVars.SCROLL_Y}: ${window.scrollY}px!important;\n            ${CssVars.SCROLLBAR_WIDTH}: ${getClientWidth(true) -\n            getClientWidth(false)}px!important;\n        }`\n        );\n    };\n\n    /*\n    if (\n        !!!window.getComputedStyle($html).getPropertyValue(CssVars.SCROLLBAR_WIDTH)\n    ) {\n        insertIndexedRuleInStyleElement(\n            getOrCreateUniqueStyleElement(\"body-scroll-defaults\"),\n            `:root {\n                ${CssVars.SCROLLBAR_WIDTH}: 0;\n            }`\n        );\n    }*/\n\n    /**\n     *\n     */\n    let scroll = {\n        x: 0,\n        y: 0\n    };\n\n    /**\n     *\n     */\n    const getScrollPosition = () =>\n        new Object({\n            x: window.scrollX,\n            y: window.scrollY\n        });\n\n    /**\n     *\n     */\n    const saveScrollPosition = () => (scroll = getScrollPosition());\n\n    /**\n     *\n     */\n    const restoreScrollPosition = () => window.scrollTo(scroll.x, scroll.y);\n\n    /**\n     *\n     */\n    const LOCKED_STATUS_CSS_CLASS = \"body-scroll-locked\";\n\n    /**\n     *\n     */\n    /**\n     * Returns whether the body scroll is locked or not\n     * @returns {boolean} The body scroll lock state\n     */\n    const isLocked = () =>\n        isStyleElementInHead($locker) &&\n        !$locker.disabled &&\n        $html.classList.contains(LOCKED_STATUS_CSS_CLASS);\n\n    /**\n     *\n     */\n    const update = () => {\n        if (!isLocked()) {\n            return;\n        }\n\n        _unlock();\n\n        _lock();\n    };\n\n    /**\n     *\n     */\n    const _lock = () => {\n        saveScrollPosition();\n        $locker.disabled = false;\n        setLockerCssVars();\n        $html.classList.add(LOCKED_STATUS_CSS_CLASS);\n    };\n\n    /**\n     *\n     */\n    const lock = () => {\n        _lock();\n\n        if (supportsCustomEvents) {\n            window.dispatchEvent(new CustomEvent(\"bodyScrollLock\"));\n        }\n\n        window.addEventListener(\"resize\", update);\n    };\n\n    /**\n     *\n     */\n    const _unlock = () => {\n        $html.classList.remove(LOCKED_STATUS_CSS_CLASS);\n        restoreScrollPosition();\n        $locker.disabled = true;\n    };\n\n    /**\n     *\n     */\n    const unlock = () => {\n        _unlock();\n\n        if (supportsCustomEvents) {\n            window.dispatchEvent(new CustomEvent(\"bodyScrollUnlock\"));\n        }\n\n        window.removeEventListener(\"resize\", update);\n    };\n\n    var bodyScroll = {\n        lock: lock,\n        unlock: unlock,\n        isLocked: isLocked,\n        toggle: () => (isLocked() ? unlock() : lock()),\n        update: update\n    };\n\n    return bodyScroll;\n\n})));\n"]}