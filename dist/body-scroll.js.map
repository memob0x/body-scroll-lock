{"version":3,"file":"body-scroll.js","sources":["src/body-scroll.constants.mjs","src/body-scroll.scroll.mjs","src/body-scroll.api.mjs"],"sourcesContent":["export const NAMESPACE = \"body-scroll-lock\";\r\n\r\nexport const $head = document.head;\r\nexport const $html = document.documentElement;\r\nexport const $body = document.body;\r\n\r\nexport const $style =\r\n    $head.querySelector(`#${NAMESPACE}`) ||\r\n    (() => {\r\n        const $style = document.createElement(\"style\");\r\n\r\n        $style.id = NAMESPACE;\r\n\r\n        return $style;\r\n    })();\r\n","/**\r\n *\r\n */\r\nlet _x = 0;\r\nlet _y = 0;\r\n\r\n/**\r\n *\r\n */\r\nexport const save = () => {\r\n    _x = window.pageXOffset;\r\n    _y = window.pageYOffset;\r\n};\r\n\r\n/**\r\n *\r\n */\r\nexport const restore = () => window.scrollTo(_x, _y);\r\n","import {\r\n    NAMESPACE,\r\n    $head,\r\n    $html,\r\n    $body,\r\n    $style\r\n} from \"./body-scroll.constants.mjs\";\r\n\r\nimport * as Scroll from \"./body-scroll.scroll.mjs\";\r\n\r\n/**\r\n * Checks if the style element is in the tag head or not\r\n * @returns {boolean} true if present\r\n */\r\nconst _styleExists = () => $style.parentNode === $head;\r\n\r\n/**\r\n *\r\n * @param {boolean} locked\r\n * @returns {number}\r\n */\r\nconst _getClientWidth = locked => {\r\n    $body.style.width = locked ? `${$html.clientWidth}px` : \"\";\r\n    $html.style.overflow = locked ? \"hidden\" : \"\";\r\n\r\n    return $html.clientWidth;\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} eventName\r\n */\r\nconst _dispatch = eventName =>\r\n    typeof window.CustomEvent === \"function\"\r\n        ? window.dispatchEvent(new CustomEvent(eventName))\r\n        : () => {};\r\n\r\n/**\r\n *\r\n */\r\nconst _lock = () => {\r\n    Scroll.save();\r\n    $style.disabled = false;\r\n\r\n    const index = 0;\r\n\r\n    if (!_styleExists()) {\r\n        $head.appendChild($style);\r\n    }\r\n\r\n    if ($style.sheet.cssRules[index]) {\r\n        $style.sheet.deleteRule(index);\r\n    }\r\n\r\n    $style.sheet.insertRule(\r\n        `:root {\r\n            --${NAMESPACE}-top-rect: ${window.scrollY * -1}px!important;\r\n            --${NAMESPACE}-scrollbar-gap: ${_getClientWidth(true) -\r\n            _getClientWidth(false)}px!important;\r\n        }`,\r\n        index\r\n    );\r\n\r\n    $html.classList.add(NAMESPACE);\r\n};\r\n\r\n/**\r\n *\r\n */\r\nconst _unlock = () => {\r\n    $html.classList.remove(NAMESPACE);\r\n\r\n    Scroll.restore();\r\n\r\n    $style.disabled = true;\r\n};\r\n\r\n/**\r\n *\r\n */\r\nconst _resize = mode => window[`${mode}EventListener`](\"resize\", update);\r\n\r\n/**\r\n *\r\n */\r\n/**\r\n * Returns whether the body scroll is locked or not\r\n * @returns {boolean} The body scroll lock state\r\n */\r\nexport const isLocked = () =>\r\n    _styleExists() && !$style.disabled && $html.classList.contains(NAMESPACE);\r\n\r\n/**\r\n *\r\n */\r\nexport const update = () => {\r\n    if (!isLocked()) {\r\n        return;\r\n    }\r\n\r\n    _unlock();\r\n\r\n    _lock();\r\n};\r\n\r\n/**\r\n *\r\n */\r\nexport const lock = () => {\r\n    _lock();\r\n\r\n    _dispatch(\"bodyscrolllock\");\r\n\r\n    _resize(\"add\");\r\n};\r\n\r\n/**\r\n *\r\n */\r\nexport const unlock = () => {\r\n    _unlock();\r\n\r\n    _dispatch(\"bodyscrollunlock\");\r\n\r\n    _resize(\"remove\");\r\n};\r\n"],"names":["Scroll.save","Scroll.restore"],"mappings":"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"}