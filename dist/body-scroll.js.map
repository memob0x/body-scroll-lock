{"version":3,"sources":["body-scroll.mjs"],"names":["global","factory","exports","module","define","amd","self","bodyScroll","$head","document","head","$html","documentElement","$body","body","$style","createElement","supportsCustomEvents","window","CustomEvent","CssVars","SCROLL_Y","SCROLLBAR_WIDTH","getClientWidth","locked","style","width","clientWidth","overflow","isStyleElementInHead","parentNode","insertIndexedRule","rule","index","appendChild","sheet","cssRules","deleteRule","insertRule","setCssVars","scrollY","scroll","x","y","getScrollPosition","scrollX","saveScrollPosition","restoreScrollPosition","scrollTo","LOCKED_STATUS_CSS_CLASS","isLocked","disabled","classList","contains","update","_unlock","_lock","add","lock","dispatchEvent","addEventListener","remove","unlock","removeEventListener","toggle"],"mappings":";;;;AAAC,WAAUA,MAAV,EAAkBC,OAAlB,EAA2B;AACxB,UAAOC,OAAP,yCAAOA,OAAP,OAAmB,QAAnB,IAA+B,OAAOC,MAAP,KAAkB,WAAjD,GAA+DA,MAAM,CAACD,OAAP,GAAiBD,OAAO,EAAvF,GACA,OAAOG,MAAP,KAAkB,UAAlB,IAAgCA,MAAM,CAACC,GAAvC,GAA6CD,MAAM,CAAC,YAAD,EAAeH,OAAf,CAAnD,IACCD,MAAM,GAAGA,MAAM,IAAIM,IAAnB,EAAyBN,MAAM,CAACO,UAAP,GAAoBN,OAAO,EADrD,CADA;AAGH,CAJA,UAIQ,YAAY;AAAE;;AAEnB,MAAMO,KAAK,GAAGC,QAAQ,CAACC,IAAvB;AACA,MAAMC,KAAK,GAAGF,QAAQ,CAACG,eAAvB;AACA,MAAMC,KAAK,GAAGJ,QAAQ,CAACK,IAAvB;AACA,MAAMC,MAAM,GAAGN,QAAQ,CAACO,aAAT,CAAuB,OAAvB,CAAf;AACA,MAAMC,oBAAoB,GAAG,OAAOC,MAAM,CAACC,WAAd,KAA8B,UAA3D;AAEA,MAAMC,OAAO,GAAG;AACZC,IAAAA,QAAQ,EAAE,wBADE;AAEZC,IAAAA,eAAe,EAAE;AAFL,GAAhB;;AASA,MAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAAAC,MAAM,EAAI;AAC7BX,IAAAA,KAAK,CAACY,KAAN,CAAYC,KAAZ,GAAoBF,MAAM,aAAMb,KAAK,CAACgB,WAAZ,UAA8B,EAAxD;AACAhB,IAAAA,KAAK,CAACc,KAAN,CAAYG,QAAZ,GAAuBJ,MAAM,GAAG,QAAH,GAAc,EAA3C;AAEA,WAAOb,KAAK,CAACgB,WAAb;AACH,GALD;;AAWA,MAAME,oBAAoB,GAAG,SAAvBA,oBAAuB;AAAA,WAAMd,MAAM,CAACe,UAAP,KAAsBtB,KAA5B;AAAA,GAA7B;;AAOA,MAAMuB,iBAAiB,GAAG,SAApBA,iBAAoB,GAA0B;AAAA,QAAzBC,IAAyB,uEAAlB,EAAkB;AAAA,QAAdC,KAAc,uEAAN,CAAM;;AAChD,QAAI,CAACJ,oBAAoB,EAAzB,EAA6B;AACzBrB,MAAAA,KAAK,CAAC0B,WAAN,CAAkBnB,MAAlB;AACH;;AAED,QAAIA,MAAM,CAACoB,KAAP,CAAaC,QAAb,CAAsBH,KAAtB,CAAJ,EAAkC;AAC9BlB,MAAAA,MAAM,CAACoB,KAAP,CAAaE,UAAb,CAAwBJ,KAAxB;AACH;;AAEDlB,IAAAA,MAAM,CAACoB,KAAP,CAAaG,UAAb,CAAwBN,IAAxB,EAA8BC,KAA9B;AACH,GAVD;;AAeA,MAAMM,UAAU,GAAG,SAAbA,UAAa,GAAM;AACrBR,IAAAA,iBAAiB,gCAEXX,OAAO,CAACC,QAFG,eAEUH,MAAM,CAACsB,OAFjB,8BAGXpB,OAAO,CAACE,eAHG,eAGiBC,cAAc,CAAC,IAAD,CAAd,GAC9BA,cAAc,CAAC,KAAD,CAJD,oBAAjB;AAOH,GARD;;AAaA,MAAIkB,MAAM,GAAG;AACTC,IAAAA,CAAC,EAAE,CADM;AAETC,IAAAA,CAAC,EAAE;AAFM,GAAb;;AAQA,MAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,GAAM;AAC5B,WAAO;AACHF,MAAAA,CAAC,EAAExB,MAAM,CAAC2B,OADP;AAEHF,MAAAA,CAAC,EAAEzB,MAAM,CAACsB;AAFP,KAAP;AAIH,GALD;;AAUA,MAAMM,kBAAkB,GAAG,SAArBA,kBAAqB;AAAA,WAAOL,MAAM,GAAGG,iBAAiB,EAAjC;AAAA,GAA3B;;AAKA,MAAMG,qBAAqB,GAAG,SAAxBA,qBAAwB;AAAA,WAAM7B,MAAM,CAAC8B,QAAP,CAAgBP,MAAM,CAACC,CAAvB,EAA0BD,MAAM,CAACE,CAAjC,CAAN;AAAA,GAA9B;;AAEA,MAAMM,uBAAuB,GAAG,oBAAhC;;AASA,MAAMC,QAAQ,GAAG,SAAXA,QAAW;AAAA,WACbrB,oBAAoB,MACpB,CAACd,MAAM,CAACoC,QADR,IAEAxC,KAAK,CAACyC,SAAN,CAAgBC,QAAhB,CAAyBJ,uBAAzB,CAHa;AAAA,GAAjB;;AAQA,MAAMK,MAAM,GAAG,SAATA,MAAS,GAAM;AACjB,QAAI,CAACJ,QAAQ,EAAb,EAAiB;AACb;AACH;;AAEDK,IAAAA,OAAO;;AAEPC,IAAAA,KAAK;AACR,GARD;;AAaA,MAAMA,KAAK,GAAG,SAARA,KAAQ,GAAM;AAChBV,IAAAA,kBAAkB;AAClB/B,IAAAA,MAAM,CAACoC,QAAP,GAAkB,KAAlB;AACAZ,IAAAA,UAAU;AACV5B,IAAAA,KAAK,CAACyC,SAAN,CAAgBK,GAAhB,CAAoBR,uBAApB;AACH,GALD;;AAUA,MAAMS,IAAI,GAAG,SAAPA,IAAO,GAAM;AACfF,IAAAA,KAAK;;AAEL,QAAIvC,oBAAJ,EAA0B;AACtBC,MAAAA,MAAM,CAACyC,aAAP,CAAqB,IAAIxC,WAAJ,CAAgB,gBAAhB,CAArB;AACH;;AAEDD,IAAAA,MAAM,CAAC0C,gBAAP,CAAwB,QAAxB,EAAkCN,MAAlC;AACH,GARD;;AAaA,MAAMC,OAAO,GAAG,SAAVA,OAAU,GAAM;AAClB5C,IAAAA,KAAK,CAACyC,SAAN,CAAgBS,MAAhB,CAAuBZ,uBAAvB;AACAF,IAAAA,qBAAqB;AACrBhC,IAAAA,MAAM,CAACoC,QAAP,GAAkB,IAAlB;AACH,GAJD;;AASA,MAAMW,MAAM,GAAG,SAATA,MAAS,GAAM;AACjBP,IAAAA,OAAO;;AAEP,QAAItC,oBAAJ,EAA0B;AACtBC,MAAAA,MAAM,CAACyC,aAAP,CAAqB,IAAIxC,WAAJ,CAAgB,kBAAhB,CAArB;AACH;;AAEDD,IAAAA,MAAM,CAAC6C,mBAAP,CAA2B,QAA3B,EAAqCT,MAArC;AACH,GARD;;AAUA,MAAI/C,UAAU,GAAG;AACbmD,IAAAA,IAAI,EAAEA,IADO;AAEbI,IAAAA,MAAM,EAAEA,MAFK;AAGbZ,IAAAA,QAAQ,EAAEA,QAHG;AAIbc,IAAAA,MAAM,EAAE;AAAA,aAAOd,QAAQ,KAAKY,MAAM,EAAX,GAAgBJ,IAAI,EAAnC;AAAA,KAJK;AAKbJ,IAAAA,MAAM,EAAEA;AALK,GAAjB;AAQA,SAAO/C,UAAP;AAEH,CA9KA,CAAD","file":"body-scroll.js","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define('bodyScroll', factory) :\n    (global = global || self, global.bodyScroll = factory());\n}(this, (function () { 'use strict';\n\n    const $head = document.head;\n    const $html = document.documentElement;\n    const $body = document.body;\n    const $style = document.createElement(\"style\");\n    const supportsCustomEvents = typeof window.CustomEvent === \"function\";\n\n    const CssVars = {\n        SCROLL_Y: \"--body-scroll-scroll-y\",\n        SCROLLBAR_WIDTH: \"--body-scroll-scrollbar-width\"\n    };\n\n    /**\n     *\n     * @param state\n     */\n    const getClientWidth = locked => {\n        $body.style.width = locked ? `${$html.clientWidth}px` : \"\";\n        $html.style.overflow = locked ? \"hidden\" : \"\";\n\n        return $html.clientWidth;\n    };\n\n    /**\n     * Checks if the style element is in the tag head or not\n     * @returns {boolean} true if present\n     */\n    const isStyleElementInHead = () => $style.parentNode === $head;\n\n    /**\n     * Inserts a rule with the CSSStyleSheet interface\n     * @param {string} rule The CSS rule to add\n     * @param {number} index The index of the CSS rule in the CSSRulesList\n     */\n    const insertIndexedRule = (rule = \"\", index = 0) => {\n        if (!isStyleElementInHead()) {\n            $head.appendChild($style);\n        }\n\n        if ($style.sheet.cssRules[index]) {\n            $style.sheet.deleteRule(index);\n        }\n\n        $style.sheet.insertRule(rule, index);\n    };\n\n    /**\n     *\n     */\n    const setCssVars = () => {\n        insertIndexedRule(\n            `:root {\n            ${CssVars.SCROLL_Y}: ${window.scrollY}px;\n            ${CssVars.SCROLLBAR_WIDTH}: ${getClientWidth(true) -\n            getClientWidth(false)}px;\n        }`\n        );\n    };\n\n    /**\n     *\n     */\n    let scroll = {\n        x: 0,\n        y: 0\n    };\n\n    /**\n     *\n     */\n    const getScrollPosition = () => {\n        return {\n            x: window.scrollX,\n            y: window.scrollY\n        };\n    };\n\n    /**\n     *\n     */\n    const saveScrollPosition = () => (scroll = getScrollPosition());\n\n    /**\n     *\n     */\n    const restoreScrollPosition = () => window.scrollTo(scroll.x, scroll.y);\n\n    const LOCKED_STATUS_CSS_CLASS = \"body-scroll-locked\";\n\n    /**\n     *\n     */\n    /**\n     * Returns whether the body scroll is locked or not\n     * @returns {boolean} The body scroll lock state\n     */\n    const isLocked = () =>\n        isStyleElementInHead() &&\n        !$style.disabled &&\n        $html.classList.contains(LOCKED_STATUS_CSS_CLASS);\n\n    /**\n     *\n     */\n    const update = () => {\n        if (!isLocked()) {\n            return;\n        }\n\n        _unlock();\n\n        _lock();\n    };\n\n    /**\n     *\n     */\n    const _lock = () => {\n        saveScrollPosition();\n        $style.disabled = false;\n        setCssVars();\n        $html.classList.add(LOCKED_STATUS_CSS_CLASS);\n    };\n\n    /**\n     *\n     */\n    const lock = () => {\n        _lock();\n\n        if (supportsCustomEvents) {\n            window.dispatchEvent(new CustomEvent(\"bodyScrollLock\"));\n        }\n\n        window.addEventListener(\"resize\", update);\n    };\n\n    /**\n     *\n     */\n    const _unlock = () => {\n        $html.classList.remove(LOCKED_STATUS_CSS_CLASS);\n        restoreScrollPosition();\n        $style.disabled = true;\n    };\n\n    /**\n     *\n     */\n    const unlock = () => {\n        _unlock();\n\n        if (supportsCustomEvents) {\n            window.dispatchEvent(new CustomEvent(\"bodyScrollUnlock\"));\n        }\n\n        window.removeEventListener(\"resize\", update);\n    };\n\n    var bodyScroll = {\n        lock: lock,\n        unlock: unlock,\n        isLocked: isLocked,\n        toggle: () => (isLocked() ? unlock() : lock()),\n        update: update\n    };\n\n    return bodyScroll;\n\n})));\n"]}