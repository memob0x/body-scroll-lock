function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}(function(g,f){(typeof exports==="undefined"?"undefined":_typeof(exports))==='object'&&typeof module!=='undefined'?module.exports=f():typeof define==='function'&&define.amd?define(f):(g=g||self,g.bodyScroll=f());})(this,function(){'use strict';var LOCKED_STATE_CLASS="body-scroll-lock";var scrollSaving=null;var lockState=false;var head=document.head;var body=document.body;var html=document.documentElement;var styler=document.createElement("style");var isNumber=function isNumber(value){return typeof value==="number"&&!isNaN(value);};var isValidScrollPosition=function isValidScrollPosition(value){return value&&isNumber(value===null||value===void 0?void 0:value.top)&&isNumber(value===null||value===void 0?void 0:value.left);};var formatScrollPosition=function formatScrollPosition(value){return isValidScrollPosition(value)?value:null;};var restoreScrollPosition=function restoreScrollPosition(scroll){scroll=scroll!==undefined?scroll:scrollSaving;scroll=formatScrollPosition(scroll);if(scroll){window.scrollTo(scroll.left,scroll.top);}return scroll;};var saveScrollPosition=function saveScrollPosition(scroll){if(scroll===undefined){scroll={top:window.pageYOffset,left:window.pageXOffset};}scrollSaving=formatScrollPosition(scroll);return scrollSaving;};var getVerticalScrollbarGap=function getVerticalScrollbarGap(){html.classList.remove(LOCKED_STATE_CLASS);var docWidth=html.getBoundingClientRect().width;body.style.width=body.getBoundingClientRect().width+"px";html.style.overflowY=body.style.overflowY="hidden";var scrollbarWidth=html.getBoundingClientRect().width-docWidth;body.style.width=html.style.overflowY=body.style.overflowY="";if(isLocked()){html.classList.add(LOCKED_STATE_CLASS);}return scrollbarWidth;};var updateCssVariables=function updateCssVariables(){if(!body.contains(styler)){head.append(styler);}var index=0;if(styler.sheet.cssRules[index]){styler.sheet.deleteRule(index);}var verticalScrollbarGap=getVerticalScrollbarGap();var scrollPosition=isValidScrollPosition(scrollSaving)?scrollSaving:{top:0,left:0};var rule=":root {\n        --body-scroll-lock-top-rect: ".concat(scrollPosition.top*-1,"px;\n        --body-scroll-lock-vertical-scrollbar-gap: ").concat(verticalScrollbarGap,"px;\n        --body-scroll-lock-vertical-scrollbar-gap-round: ").concat(Math.round(verticalScrollbarGap),"px;\n    }");styler.sheet.insertRule(rule,index);};var getSavedScrollPosition=function getSavedScrollPosition(){return scrollSaving;};var isLocked=function isLocked(){return lockState;};var dispatchMessage=function dispatchMessage(messageName){return typeof window.CustomEvent==="function"?window.dispatchEvent(new CustomEvent("bodyscroll".concat(messageName))):function(){};};var doLock=function doLock(){if(isLocked()){return false;}lockState=true;if(!isValidScrollPosition(scrollSaving)){saveScrollPosition({top:window.pageYOffset,left:window.pageXOffset});}updateCssVariables();html.classList.add(LOCKED_STATE_CLASS);return true;};var doUnlock=function doUnlock(){if(!isLocked()){return false;}lockState=false;html.classList.remove(LOCKED_STATE_CLASS);restoreScrollPosition(scrollSaving);scrollSaving=null;return true;};var lock=function lock(){if(!doLock()){return;}dispatchMessage("lock");};var unlock=function unlock(){if(!doUnlock()){return;}dispatchMessage("unlock");};var RESIZE_DEBOUNCE_TIME=150;var id=null;var resizeHandler=function resizeHandler(){clearTimeout(id);id=setTimeout(function(){if(!doUnlock()){return;}doLock();dispatchMessage("resize");},RESIZE_DEBOUNCE_TIME);};window.addEventListener("resize",resizeHandler,true);var bodyScroll={lock:lock,unlock:unlock,isLocked:isLocked,updateCssVariables:updateCssVariables,getVerticalScrollbarGap:getVerticalScrollbarGap,restoreScrollPosition:restoreScrollPosition,saveScrollPosition:saveScrollPosition,getSavedScrollPosition:getSavedScrollPosition};return bodyScroll;});//# sourceMappingURL=body-scroll.js.map
